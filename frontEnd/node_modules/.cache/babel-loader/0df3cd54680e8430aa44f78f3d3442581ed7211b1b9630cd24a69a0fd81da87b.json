{"ast":null,"code":"/**\n * @license\n * Copyright 2011 Paul Felix (paul.eric.felix@gmail.com)\n * MIT-licenced: https://opensource.org/licenses/MIT\n */\n/*global Dygraph:false,TouchEvent:false */\n\n/**\n * @fileoverview This file contains the RangeSelector plugin used to provide\n * a timeline range selector widget for dygraphs.\n */\n\n/*global Dygraph:false */\n\"use strict\";\n\nimport * as utils from '../dygraph-utils';\nimport DygraphInteraction from '../dygraph-interaction-model';\nimport IFrameTarp from '../iframe-tarp';\nvar rangeSelector = function () {\n  this.hasTouchInterface_ = typeof TouchEvent != 'undefined';\n  this.isMobileDevice_ = /mobile|android/gi.test(navigator.appVersion);\n  this.interfaceCreated_ = false;\n};\nrangeSelector.prototype.toString = function () {\n  return \"RangeSelector Plugin\";\n};\nrangeSelector.prototype.activate = function (dygraph) {\n  this.dygraph_ = dygraph;\n  if (this.getOption_('showRangeSelector')) {\n    this.createInterface_();\n  }\n  return {\n    layout: this.reserveSpace_,\n    predraw: this.renderStaticLayer_,\n    didDrawChart: this.renderInteractiveLayer_\n  };\n};\nrangeSelector.prototype.destroy = function () {\n  this.bgcanvas_ = null;\n  this.fgcanvas_ = null;\n  this.leftZoomHandle_ = null;\n  this.rightZoomHandle_ = null;\n};\n\n//------------------------------------------------------------------\n// Private methods\n//------------------------------------------------------------------\n\nrangeSelector.prototype.getOption_ = function (name, opt_series) {\n  return this.dygraph_.getOption(name, opt_series);\n};\nrangeSelector.prototype.setDefaultOption_ = function (name, value) {\n  this.dygraph_.attrs_[name] = value;\n};\n\n/**\n * @private\n * Creates the range selector elements and adds them to the graph.\n */\nrangeSelector.prototype.createInterface_ = function () {\n  this.createCanvases_();\n  this.createZoomHandles_();\n  this.initInteraction_();\n\n  // Range selector and animatedZooms have a bad interaction. See issue 359.\n  if (this.getOption_('animatedZooms')) {\n    console.warn('Animated zooms and range selector are not compatible; disabling animatedZooms.');\n    this.dygraph_.updateOptions({\n      animatedZooms: false\n    }, true);\n  }\n  this.interfaceCreated_ = true;\n  this.addToGraph_();\n};\n\n/**\n * @private\n * Adds the range selector to the graph.\n */\nrangeSelector.prototype.addToGraph_ = function () {\n  var graphDiv = this.graphDiv_ = this.dygraph_.graphDiv;\n  graphDiv.appendChild(this.bgcanvas_);\n  graphDiv.appendChild(this.fgcanvas_);\n  graphDiv.appendChild(this.leftZoomHandle_);\n  graphDiv.appendChild(this.rightZoomHandle_);\n};\n\n/**\n * @private\n * Removes the range selector from the graph.\n */\nrangeSelector.prototype.removeFromGraph_ = function () {\n  var graphDiv = this.graphDiv_;\n  graphDiv.removeChild(this.bgcanvas_);\n  graphDiv.removeChild(this.fgcanvas_);\n  graphDiv.removeChild(this.leftZoomHandle_);\n  graphDiv.removeChild(this.rightZoomHandle_);\n  this.graphDiv_ = null;\n};\n\n/**\n * @private\n * Called by Layout to allow range selector to reserve its space.\n */\nrangeSelector.prototype.reserveSpace_ = function (e) {\n  if (this.getOption_('showRangeSelector')) {\n    e.reserveSpaceBottom(this.getOption_('rangeSelectorHeight') + 4);\n  }\n};\n\n/**\n * @private\n * Renders the static portion of the range selector at the predraw stage.\n */\nrangeSelector.prototype.renderStaticLayer_ = function () {\n  if (!this.updateVisibility_()) {\n    return;\n  }\n  this.resize_();\n  this.drawStaticLayer_();\n};\n\n/**\n * @private\n * Renders the interactive portion of the range selector after the chart has been drawn.\n */\nrangeSelector.prototype.renderInteractiveLayer_ = function () {\n  if (!this.updateVisibility_() || this.isChangingRange_) {\n    return;\n  }\n  this.placeZoomHandles_();\n  this.drawInteractiveLayer_();\n};\n\n/**\n * @private\n * Check to see if the range selector is enabled/disabled and update visibility accordingly.\n */\nrangeSelector.prototype.updateVisibility_ = function () {\n  var enabled = this.getOption_('showRangeSelector');\n  if (enabled) {\n    if (!this.interfaceCreated_) {\n      this.createInterface_();\n    } else if (!this.graphDiv_ || !this.graphDiv_.parentNode) {\n      this.addToGraph_();\n    }\n  } else if (this.graphDiv_) {\n    this.removeFromGraph_();\n    var dygraph = this.dygraph_;\n    setTimeout(function () {\n      dygraph.width_ = 0;\n      dygraph.resize();\n    }, 1);\n  }\n  return enabled;\n};\n\n/**\n * @private\n * Resizes the range selector.\n */\nrangeSelector.prototype.resize_ = function () {\n  function setElementRect(canvas, context, rect, pixelRatioOption) {\n    var canvasScale = pixelRatioOption || utils.getContextPixelRatio(context);\n    canvas.style.top = rect.y + 'px';\n    canvas.style.left = rect.x + 'px';\n    canvas.width = rect.w * canvasScale;\n    canvas.height = rect.h * canvasScale;\n    canvas.style.width = rect.w + 'px';\n    canvas.style.height = rect.h + 'px';\n    if (canvasScale != 1) {\n      context.scale(canvasScale, canvasScale);\n    }\n  }\n  var plotArea = this.dygraph_.layout_.getPlotArea();\n  var xAxisLabelHeight = 0;\n  if (this.dygraph_.getOptionForAxis('drawAxis', 'x')) {\n    xAxisLabelHeight = this.getOption_('xAxisHeight') || this.getOption_('axisLabelFontSize') + 2 * this.getOption_('axisTickSize');\n  }\n  this.canvasRect_ = {\n    x: plotArea.x,\n    y: plotArea.y + plotArea.h + xAxisLabelHeight + 4,\n    w: plotArea.w,\n    h: this.getOption_('rangeSelectorHeight')\n  };\n  var pixelRatioOption = this.dygraph_.getNumericOption('pixelRatio');\n  setElementRect(this.bgcanvas_, this.bgcanvas_ctx_, this.canvasRect_, pixelRatioOption);\n  setElementRect(this.fgcanvas_, this.fgcanvas_ctx_, this.canvasRect_, pixelRatioOption);\n};\n\n/**\n * @private\n * Creates the background and foreground canvases.\n */\nrangeSelector.prototype.createCanvases_ = function () {\n  this.bgcanvas_ = utils.createCanvas();\n  this.bgcanvas_.className = 'dygraph-rangesel-bgcanvas';\n  this.bgcanvas_.style.position = 'absolute';\n  this.bgcanvas_.style.zIndex = 9;\n  this.bgcanvas_ctx_ = utils.getContext(this.bgcanvas_);\n  this.fgcanvas_ = utils.createCanvas();\n  this.fgcanvas_.className = 'dygraph-rangesel-fgcanvas';\n  this.fgcanvas_.style.position = 'absolute';\n  this.fgcanvas_.style.zIndex = 9;\n  this.fgcanvas_.style.cursor = 'default';\n  this.fgcanvas_ctx_ = utils.getContext(this.fgcanvas_);\n};\n\n/**\n * @private\n * Creates the zoom handle elements.\n */\nrangeSelector.prototype.createZoomHandles_ = function () {\n  var img = new Image();\n  img.className = 'dygraph-rangesel-zoomhandle';\n  img.style.position = 'absolute';\n  img.style.zIndex = 10;\n  img.style.visibility = 'hidden'; // Initially hidden so they don't show up in the wrong place.\n  img.style.cursor = 'col-resize';\n  // TODO: change image to more options\n  img.width = 9;\n  img.height = 16;\n  img.src = 'data:image/png;base64,' + 'iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAA' + 'zwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENv' + 'bW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl' + '6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7s' + 'qSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII=';\n  if (this.isMobileDevice_) {\n    img.width *= 2;\n    img.height *= 2;\n  }\n  this.leftZoomHandle_ = img;\n  this.rightZoomHandle_ = img.cloneNode(false);\n};\n\n/**\n * @private\n * Sets up the interaction for the range selector.\n */\nrangeSelector.prototype.initInteraction_ = function () {\n  var self = this;\n  var topElem = document;\n  var clientXLast = 0;\n  var handle = null;\n  var isZooming = false;\n  var isPanning = false;\n  var dynamic = !this.isMobileDevice_;\n\n  // We cover iframes during mouse interactions. See comments in\n  // dygraph-utils.js for more info on why this is a good idea.\n  var tarp = new IFrameTarp();\n\n  // functions, defined below.  Defining them this way (rather than with\n  // \"function foo() {...}\") makes JSHint happy.\n  var toXDataWindow, onZoomStart, onZoom, onZoomEnd, doZoom, isMouseInPanZone, onPanStart, onPan, onPanEnd, doPan, onCanvasHover;\n\n  // Touch event functions\n  var onZoomHandleTouchEvent, onCanvasTouchEvent, addTouchEvents;\n  toXDataWindow = function (zoomHandleStatus) {\n    var xDataLimits = self.dygraph_.xAxisExtremes();\n    var fact = (xDataLimits[1] - xDataLimits[0]) / self.canvasRect_.w;\n    var xDataMin = xDataLimits[0] + (zoomHandleStatus.leftHandlePos - self.canvasRect_.x) * fact;\n    var xDataMax = xDataLimits[0] + (zoomHandleStatus.rightHandlePos - self.canvasRect_.x) * fact;\n    return [xDataMin, xDataMax];\n  };\n  onZoomStart = function (e) {\n    utils.cancelEvent(e);\n    isZooming = true;\n    clientXLast = e.clientX;\n    handle = e.target ? e.target : e.srcElement;\n    if (e.type === 'mousedown' || e.type === 'dragstart') {\n      // These events are removed manually.\n      utils.addEvent(topElem, 'mousemove', onZoom);\n      utils.addEvent(topElem, 'mouseup', onZoomEnd);\n    }\n    self.fgcanvas_.style.cursor = 'col-resize';\n    tarp.cover();\n    return true;\n  };\n  onZoom = function (e) {\n    if (!isZooming) {\n      return false;\n    }\n    utils.cancelEvent(e);\n    var delX = e.clientX - clientXLast;\n    if (Math.abs(delX) < 4) {\n      return true;\n    }\n    clientXLast = e.clientX;\n\n    // Move handle.\n    var zoomHandleStatus = self.getZoomHandleStatus_();\n    var newPos;\n    if (handle == self.leftZoomHandle_) {\n      newPos = zoomHandleStatus.leftHandlePos + delX;\n      newPos = Math.min(newPos, zoomHandleStatus.rightHandlePos - handle.width - 3);\n      newPos = Math.max(newPos, self.canvasRect_.x);\n    } else {\n      newPos = zoomHandleStatus.rightHandlePos + delX;\n      newPos = Math.min(newPos, self.canvasRect_.x + self.canvasRect_.w);\n      newPos = Math.max(newPos, zoomHandleStatus.leftHandlePos + handle.width + 3);\n    }\n    var halfHandleWidth = handle.width / 2;\n    handle.style.left = newPos - halfHandleWidth + 'px';\n    self.drawInteractiveLayer_();\n\n    // Zoom on the fly.\n    if (dynamic) {\n      doZoom();\n    }\n    return true;\n  };\n  onZoomEnd = function (e) {\n    if (!isZooming) {\n      return false;\n    }\n    isZooming = false;\n    tarp.uncover();\n    utils.removeEvent(topElem, 'mousemove', onZoom);\n    utils.removeEvent(topElem, 'mouseup', onZoomEnd);\n    self.fgcanvas_.style.cursor = 'default';\n\n    // If on a slower device, zoom now.\n    if (!dynamic) {\n      doZoom();\n    }\n    return true;\n  };\n  doZoom = function () {\n    try {\n      var zoomHandleStatus = self.getZoomHandleStatus_();\n      self.isChangingRange_ = true;\n      if (!zoomHandleStatus.isZoomed) {\n        self.dygraph_.resetZoom();\n      } else {\n        var xDataWindow = toXDataWindow(zoomHandleStatus);\n        self.dygraph_.doZoomXDates_(xDataWindow[0], xDataWindow[1]);\n      }\n    } finally {\n      self.isChangingRange_ = false;\n    }\n  };\n  isMouseInPanZone = function (e) {\n    var rect = self.leftZoomHandle_.getBoundingClientRect();\n    var leftHandleClientX = rect.left + rect.width / 2;\n    rect = self.rightZoomHandle_.getBoundingClientRect();\n    var rightHandleClientX = rect.left + rect.width / 2;\n    return e.clientX > leftHandleClientX && e.clientX < rightHandleClientX;\n  };\n  onPanStart = function (e) {\n    if (!isPanning && isMouseInPanZone(e) && self.getZoomHandleStatus_().isZoomed) {\n      utils.cancelEvent(e);\n      isPanning = true;\n      clientXLast = e.clientX;\n      if (e.type === 'mousedown') {\n        // These events are removed manually.\n        utils.addEvent(topElem, 'mousemove', onPan);\n        utils.addEvent(topElem, 'mouseup', onPanEnd);\n      }\n      return true;\n    }\n    return false;\n  };\n  onPan = function (e) {\n    if (!isPanning) {\n      return false;\n    }\n    utils.cancelEvent(e);\n    var delX = e.clientX - clientXLast;\n    if (Math.abs(delX) < 4) {\n      return true;\n    }\n    clientXLast = e.clientX;\n\n    // Move range view\n    var zoomHandleStatus = self.getZoomHandleStatus_();\n    var leftHandlePos = zoomHandleStatus.leftHandlePos;\n    var rightHandlePos = zoomHandleStatus.rightHandlePos;\n    var rangeSize = rightHandlePos - leftHandlePos;\n    if (leftHandlePos + delX <= self.canvasRect_.x) {\n      leftHandlePos = self.canvasRect_.x;\n      rightHandlePos = leftHandlePos + rangeSize;\n    } else if (rightHandlePos + delX >= self.canvasRect_.x + self.canvasRect_.w) {\n      rightHandlePos = self.canvasRect_.x + self.canvasRect_.w;\n      leftHandlePos = rightHandlePos - rangeSize;\n    } else {\n      leftHandlePos += delX;\n      rightHandlePos += delX;\n    }\n    var halfHandleWidth = self.leftZoomHandle_.width / 2;\n    self.leftZoomHandle_.style.left = leftHandlePos - halfHandleWidth + 'px';\n    self.rightZoomHandle_.style.left = rightHandlePos - halfHandleWidth + 'px';\n    self.drawInteractiveLayer_();\n\n    // Do pan on the fly.\n    if (dynamic) {\n      doPan();\n    }\n    return true;\n  };\n  onPanEnd = function (e) {\n    if (!isPanning) {\n      return false;\n    }\n    isPanning = false;\n    utils.removeEvent(topElem, 'mousemove', onPan);\n    utils.removeEvent(topElem, 'mouseup', onPanEnd);\n    // If on a slower device, do pan now.\n    if (!dynamic) {\n      doPan();\n    }\n    return true;\n  };\n  doPan = function () {\n    try {\n      self.isChangingRange_ = true;\n      self.dygraph_.dateWindow_ = toXDataWindow(self.getZoomHandleStatus_());\n      self.dygraph_.drawGraph_(false);\n    } finally {\n      self.isChangingRange_ = false;\n    }\n  };\n  onCanvasHover = function (e) {\n    if (isZooming || isPanning) {\n      return;\n    }\n    var cursor = isMouseInPanZone(e) ? 'move' : 'default';\n    if (cursor != self.fgcanvas_.style.cursor) {\n      self.fgcanvas_.style.cursor = cursor;\n    }\n  };\n  onZoomHandleTouchEvent = function (e) {\n    if (e.type == 'touchstart' && e.targetTouches.length == 1) {\n      if (onZoomStart(e.targetTouches[0])) {\n        utils.cancelEvent(e);\n      }\n    } else if (e.type == 'touchmove' && e.targetTouches.length == 1) {\n      if (onZoom(e.targetTouches[0])) {\n        utils.cancelEvent(e);\n      }\n    } else {\n      onZoomEnd(e);\n    }\n  };\n  onCanvasTouchEvent = function (e) {\n    if (e.type == 'touchstart' && e.targetTouches.length == 1) {\n      if (onPanStart(e.targetTouches[0])) {\n        utils.cancelEvent(e);\n      }\n    } else if (e.type == 'touchmove' && e.targetTouches.length == 1) {\n      if (onPan(e.targetTouches[0])) {\n        utils.cancelEvent(e);\n      }\n    } else {\n      onPanEnd(e);\n    }\n  };\n  addTouchEvents = function (elem, fn) {\n    var types = ['touchstart', 'touchend', 'touchmove', 'touchcancel'];\n    for (var i = 0; i < types.length; i++) {\n      self.dygraph_.addAndTrackEvent(elem, types[i], fn);\n    }\n  };\n  this.setDefaultOption_('interactionModel', DygraphInteraction.dragIsPanInteractionModel);\n  this.setDefaultOption_('panEdgeFraction', 0.0001);\n  var dragStartEvent = window.opera ? 'mousedown' : 'dragstart';\n  this.dygraph_.addAndTrackEvent(this.leftZoomHandle_, dragStartEvent, onZoomStart);\n  this.dygraph_.addAndTrackEvent(this.rightZoomHandle_, dragStartEvent, onZoomStart);\n  this.dygraph_.addAndTrackEvent(this.fgcanvas_, 'mousedown', onPanStart);\n  this.dygraph_.addAndTrackEvent(this.fgcanvas_, 'mousemove', onCanvasHover);\n\n  // Touch events\n  if (this.hasTouchInterface_) {\n    addTouchEvents(this.leftZoomHandle_, onZoomHandleTouchEvent);\n    addTouchEvents(this.rightZoomHandle_, onZoomHandleTouchEvent);\n    addTouchEvents(this.fgcanvas_, onCanvasTouchEvent);\n  }\n};\n\n/**\n * @private\n * Draws the static layer in the background canvas.\n */\nrangeSelector.prototype.drawStaticLayer_ = function () {\n  var ctx = this.bgcanvas_ctx_;\n  ctx.clearRect(0, 0, this.canvasRect_.w, this.canvasRect_.h);\n  try {\n    this.drawMiniPlot_();\n  } catch (ex) {\n    console.warn(ex);\n  }\n  var margin = 0.5;\n  this.bgcanvas_ctx_.lineWidth = this.getOption_('rangeSelectorBackgroundLineWidth');\n  ctx.strokeStyle = this.getOption_('rangeSelectorBackgroundStrokeColor');\n  ctx.beginPath();\n  ctx.moveTo(margin, margin);\n  ctx.lineTo(margin, this.canvasRect_.h - margin);\n  ctx.lineTo(this.canvasRect_.w - margin, this.canvasRect_.h - margin);\n  ctx.lineTo(this.canvasRect_.w - margin, margin);\n  ctx.stroke();\n};\n\n/**\n * @private\n * Draws the mini plot in the background canvas.\n */\nrangeSelector.prototype.drawMiniPlot_ = function () {\n  var fillStyle = this.getOption_('rangeSelectorPlotFillColor');\n  var fillGradientStyle = this.getOption_('rangeSelectorPlotFillGradientColor');\n  var strokeStyle = this.getOption_('rangeSelectorPlotStrokeColor');\n  if (!fillStyle && !strokeStyle) {\n    return;\n  }\n  var stepPlot = this.getOption_('stepPlot');\n  var combinedSeriesData = this.computeCombinedSeriesAndLimits_();\n  var yRange = combinedSeriesData.yMax - combinedSeriesData.yMin;\n\n  // Draw the mini plot.\n  var ctx = this.bgcanvas_ctx_;\n  var margin = 0.5;\n  var xExtremes = this.dygraph_.xAxisExtremes();\n  var xRange = Math.max(xExtremes[1] - xExtremes[0], 1.e-30);\n  var xFact = (this.canvasRect_.w - margin) / xRange;\n  var yFact = (this.canvasRect_.h - margin) / yRange;\n  var canvasWidth = this.canvasRect_.w - margin;\n  var canvasHeight = this.canvasRect_.h - margin;\n  var prevX = null,\n    prevY = null;\n  ctx.beginPath();\n  ctx.moveTo(margin, canvasHeight);\n  for (var i = 0; i < combinedSeriesData.data.length; i++) {\n    var dataPoint = combinedSeriesData.data[i];\n    var x = dataPoint[0] !== null ? (dataPoint[0] - xExtremes[0]) * xFact : NaN;\n    var y = dataPoint[1] !== null ? canvasHeight - (dataPoint[1] - combinedSeriesData.yMin) * yFact : NaN;\n\n    // Skip points that don't change the x-value. Overly fine-grained points\n    // can cause major slowdowns with the ctx.fill() call below.\n    if (!stepPlot && prevX !== null && Math.round(x) == Math.round(prevX)) {\n      continue;\n    }\n    if (isFinite(x) && isFinite(y)) {\n      if (prevX === null) {\n        ctx.lineTo(x, canvasHeight);\n      } else if (stepPlot) {\n        ctx.lineTo(x, prevY);\n      }\n      ctx.lineTo(x, y);\n      prevX = x;\n      prevY = y;\n    } else {\n      if (prevX !== null) {\n        if (stepPlot) {\n          ctx.lineTo(x, prevY);\n          ctx.lineTo(x, canvasHeight);\n        } else {\n          ctx.lineTo(prevX, canvasHeight);\n        }\n      }\n      prevX = prevY = null;\n    }\n  }\n  ctx.lineTo(canvasWidth, canvasHeight);\n  ctx.closePath();\n  if (fillStyle) {\n    var lingrad = this.bgcanvas_ctx_.createLinearGradient(0, 0, 0, canvasHeight);\n    if (fillGradientStyle) {\n      lingrad.addColorStop(0, fillGradientStyle);\n    }\n    lingrad.addColorStop(1, fillStyle);\n    this.bgcanvas_ctx_.fillStyle = lingrad;\n    ctx.fill();\n  }\n  if (strokeStyle) {\n    this.bgcanvas_ctx_.strokeStyle = strokeStyle;\n    this.bgcanvas_ctx_.lineWidth = this.getOption_('rangeSelectorPlotLineWidth');\n    ctx.stroke();\n  }\n};\n\n/**\n * @private\n * Computes and returns the combined series data along with min/max for the mini plot.\n * The combined series consists of averaged values for all series.\n * When series have error bars, the error bars are ignored.\n * @return {Object} An object containing combined series array, ymin, ymax.\n */\nrangeSelector.prototype.computeCombinedSeriesAndLimits_ = function () {\n  var g = this.dygraph_;\n  var logscale = this.getOption_('logscale');\n  var i;\n\n  // Select series to combine. By default, all series are combined.\n  var numColumns = g.numColumns();\n  var labels = g.getLabels();\n  var includeSeries = new Array(numColumns);\n  var anySet = false;\n  var visibility = g.visibility();\n  var inclusion = [];\n  for (i = 1; i < numColumns; i++) {\n    var include = this.getOption_('showInRangeSelector', labels[i]);\n    inclusion.push(include);\n    if (include !== null) anySet = true; // it's set explicitly for this series\n  }\n  if (anySet) {\n    for (i = 1; i < numColumns; i++) {\n      includeSeries[i] = inclusion[i - 1];\n    }\n  } else {\n    for (i = 1; i < numColumns; i++) {\n      includeSeries[i] = visibility[i - 1];\n    }\n  }\n\n  // Create a combined series (average of selected series values).\n  // TODO(danvk): short-circuit if there's only one series.\n  var rolledSeries = [];\n  var dataHandler = g.dataHandler_;\n  var options = g.attributes_;\n  for (i = 1; i < g.numColumns(); i++) {\n    if (!includeSeries[i]) continue;\n    var series = dataHandler.extractSeries(g.rawData_, i, options);\n    if (g.rollPeriod() > 1) {\n      series = dataHandler.rollingAverage(series, g.rollPeriod(), options, i);\n    }\n    rolledSeries.push(series);\n  }\n  var combinedSeries = [];\n  for (i = 0; i < rolledSeries[0].length; i++) {\n    var sum = 0;\n    var count = 0;\n    for (var j = 0; j < rolledSeries.length; j++) {\n      var y = rolledSeries[j][i][1];\n      if (y === null || isNaN(y)) continue;\n      count++;\n      sum += y;\n    }\n    combinedSeries.push([rolledSeries[0][i][0], sum / count]);\n  }\n\n  // Compute the y range.\n  var yMin = Number.MAX_VALUE;\n  var yMax = -Number.MAX_VALUE;\n  for (i = 0; i < combinedSeries.length; i++) {\n    var yVal = combinedSeries[i][1];\n    if (yVal !== null && isFinite(yVal) && (!logscale || yVal > 0)) {\n      yMin = Math.min(yMin, yVal);\n      yMax = Math.max(yMax, yVal);\n    }\n  }\n\n  // Convert Y data to log scale if needed.\n  // Also, expand the Y range to compress the mini plot a little.\n  var extraPercent = 0.25;\n  if (logscale) {\n    yMax = utils.log10(yMax);\n    yMax += yMax * extraPercent;\n    yMin = utils.log10(yMin);\n    for (i = 0; i < combinedSeries.length; i++) {\n      combinedSeries[i][1] = utils.log10(combinedSeries[i][1]);\n    }\n  } else {\n    var yExtra;\n    var yRange = yMax - yMin;\n    if (yRange <= Number.MIN_VALUE) {\n      yExtra = yMax * extraPercent;\n    } else {\n      yExtra = yRange * extraPercent;\n    }\n    yMax += yExtra;\n    yMin -= yExtra;\n  }\n  return {\n    data: combinedSeries,\n    yMin: yMin,\n    yMax: yMax\n  };\n};\n\n/**\n * @private\n * Places the zoom handles in the proper position based on the current X data window.\n */\nrangeSelector.prototype.placeZoomHandles_ = function () {\n  var xExtremes = this.dygraph_.xAxisExtremes();\n  var xWindowLimits = this.dygraph_.xAxisRange();\n  var xRange = xExtremes[1] - xExtremes[0];\n  var leftPercent = Math.max(0, (xWindowLimits[0] - xExtremes[0]) / xRange);\n  var rightPercent = Math.max(0, (xExtremes[1] - xWindowLimits[1]) / xRange);\n  var leftCoord = this.canvasRect_.x + this.canvasRect_.w * leftPercent;\n  var rightCoord = this.canvasRect_.x + this.canvasRect_.w * (1 - rightPercent);\n  var handleTop = Math.max(this.canvasRect_.y, this.canvasRect_.y + (this.canvasRect_.h - this.leftZoomHandle_.height) / 2);\n  var halfHandleWidth = this.leftZoomHandle_.width / 2;\n  this.leftZoomHandle_.style.left = leftCoord - halfHandleWidth + 'px';\n  this.leftZoomHandle_.style.top = handleTop + 'px';\n  this.rightZoomHandle_.style.left = rightCoord - halfHandleWidth + 'px';\n  this.rightZoomHandle_.style.top = this.leftZoomHandle_.style.top;\n  this.leftZoomHandle_.style.visibility = 'visible';\n  this.rightZoomHandle_.style.visibility = 'visible';\n};\n\n/**\n * @private\n * Draws the interactive layer in the foreground canvas.\n */\nrangeSelector.prototype.drawInteractiveLayer_ = function () {\n  var ctx = this.fgcanvas_ctx_;\n  ctx.clearRect(0, 0, this.canvasRect_.w, this.canvasRect_.h);\n  var margin = 1;\n  var width = this.canvasRect_.w - margin;\n  var height = this.canvasRect_.h - margin;\n  var zoomHandleStatus = this.getZoomHandleStatus_();\n  ctx.strokeStyle = this.getOption_('rangeSelectorForegroundStrokeColor');\n  ctx.lineWidth = this.getOption_('rangeSelectorForegroundLineWidth');\n  if (!zoomHandleStatus.isZoomed) {\n    ctx.beginPath();\n    ctx.moveTo(margin, margin);\n    ctx.lineTo(margin, height);\n    ctx.lineTo(width, height);\n    ctx.lineTo(width, margin);\n    ctx.stroke();\n  } else {\n    var leftHandleCanvasPos = Math.max(margin, zoomHandleStatus.leftHandlePos - this.canvasRect_.x);\n    var rightHandleCanvasPos = Math.min(width, zoomHandleStatus.rightHandlePos - this.canvasRect_.x);\n    const veilColour = this.getOption_('rangeSelectorVeilColour');\n    ctx.fillStyle = veilColour ? veilColour : 'rgba(240, 240, 240, ' + this.getOption_('rangeSelectorAlpha').toString() + ')';\n    ctx.fillRect(0, 0, leftHandleCanvasPos, this.canvasRect_.h);\n    ctx.fillRect(rightHandleCanvasPos, 0, this.canvasRect_.w - rightHandleCanvasPos, this.canvasRect_.h);\n    ctx.beginPath();\n    ctx.moveTo(margin, margin);\n    ctx.lineTo(leftHandleCanvasPos, margin);\n    ctx.lineTo(leftHandleCanvasPos, height);\n    ctx.lineTo(rightHandleCanvasPos, height);\n    ctx.lineTo(rightHandleCanvasPos, margin);\n    ctx.lineTo(width, margin);\n    ctx.stroke();\n  }\n};\n\n/**\n * @private\n * Returns the current zoom handle position information.\n * @return {Object} The zoom handle status.\n */\nrangeSelector.prototype.getZoomHandleStatus_ = function () {\n  var halfHandleWidth = this.leftZoomHandle_.width / 2;\n  var leftHandlePos = parseFloat(this.leftZoomHandle_.style.left) + halfHandleWidth;\n  var rightHandlePos = parseFloat(this.rightZoomHandle_.style.left) + halfHandleWidth;\n  return {\n    leftHandlePos: leftHandlePos,\n    rightHandlePos: rightHandlePos,\n    isZoomed: leftHandlePos - 1 > this.canvasRect_.x || rightHandlePos + 1 < this.canvasRect_.x + this.canvasRect_.w\n  };\n};\nexport default rangeSelector;","map":{"version":3,"names":["utils","DygraphInteraction","IFrameTarp","rangeSelector","hasTouchInterface_","TouchEvent","isMobileDevice_","test","navigator","appVersion","interfaceCreated_","prototype","toString","activate","dygraph","dygraph_","getOption_","createInterface_","layout","reserveSpace_","predraw","renderStaticLayer_","didDrawChart","renderInteractiveLayer_","destroy","bgcanvas_","fgcanvas_","leftZoomHandle_","rightZoomHandle_","name","opt_series","getOption","setDefaultOption_","value","attrs_","createCanvases_","createZoomHandles_","initInteraction_","console","warn","updateOptions","animatedZooms","addToGraph_","graphDiv","graphDiv_","appendChild","removeFromGraph_","removeChild","e","reserveSpaceBottom","updateVisibility_","resize_","drawStaticLayer_","isChangingRange_","placeZoomHandles_","drawInteractiveLayer_","enabled","parentNode","setTimeout","width_","resize","setElementRect","canvas","context","rect","pixelRatioOption","canvasScale","getContextPixelRatio","style","top","y","left","x","width","w","height","h","scale","plotArea","layout_","getPlotArea","xAxisLabelHeight","getOptionForAxis","canvasRect_","getNumericOption","bgcanvas_ctx_","fgcanvas_ctx_","createCanvas","className","position","zIndex","getContext","cursor","img","Image","visibility","src","cloneNode","self","topElem","document","clientXLast","handle","isZooming","isPanning","dynamic","tarp","toXDataWindow","onZoomStart","onZoom","onZoomEnd","doZoom","isMouseInPanZone","onPanStart","onPan","onPanEnd","doPan","onCanvasHover","onZoomHandleTouchEvent","onCanvasTouchEvent","addTouchEvents","zoomHandleStatus","xDataLimits","xAxisExtremes","fact","xDataMin","leftHandlePos","xDataMax","rightHandlePos","cancelEvent","clientX","target","srcElement","type","addEvent","cover","delX","Math","abs","getZoomHandleStatus_","newPos","min","max","halfHandleWidth","uncover","removeEvent","isZoomed","resetZoom","xDataWindow","doZoomXDates_","getBoundingClientRect","leftHandleClientX","rightHandleClientX","rangeSize","dateWindow_","drawGraph_","targetTouches","length","elem","fn","types","i","addAndTrackEvent","dragIsPanInteractionModel","dragStartEvent","window","opera","ctx","clearRect","drawMiniPlot_","ex","margin","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","fillStyle","fillGradientStyle","stepPlot","combinedSeriesData","computeCombinedSeriesAndLimits_","yRange","yMax","yMin","xExtremes","xRange","xFact","yFact","canvasWidth","canvasHeight","prevX","prevY","data","dataPoint","NaN","round","isFinite","closePath","lingrad","createLinearGradient","addColorStop","fill","g","logscale","numColumns","labels","getLabels","includeSeries","Array","anySet","inclusion","include","push","rolledSeries","dataHandler","dataHandler_","options","attributes_","series","extractSeries","rawData_","rollPeriod","rollingAverage","combinedSeries","sum","count","j","isNaN","Number","MAX_VALUE","yVal","extraPercent","log10","yExtra","MIN_VALUE","xWindowLimits","xAxisRange","leftPercent","rightPercent","leftCoord","rightCoord","handleTop","leftHandleCanvasPos","rightHandleCanvasPos","veilColour","fillRect","parseFloat"],"sources":["/Users/fneffati/Documents/Classes/TBRTD/frontend/node_modules/dygraphs/src/plugins/range-selector.js"],"sourcesContent":["/**\n * @license\n * Copyright 2011 Paul Felix (paul.eric.felix@gmail.com)\n * MIT-licenced: https://opensource.org/licenses/MIT\n */\n/*global Dygraph:false,TouchEvent:false */\n\n/**\n * @fileoverview This file contains the RangeSelector plugin used to provide\n * a timeline range selector widget for dygraphs.\n */\n\n/*global Dygraph:false */\n\"use strict\";\n\nimport * as utils from '../dygraph-utils';\nimport DygraphInteraction from '../dygraph-interaction-model';\nimport IFrameTarp from '../iframe-tarp';\n\nvar rangeSelector = function() {\n  this.hasTouchInterface_ = typeof(TouchEvent) != 'undefined';\n  this.isMobileDevice_ = /mobile|android/gi.test(navigator.appVersion);\n  this.interfaceCreated_ = false;\n};\n\nrangeSelector.prototype.toString = function() {\n  return \"RangeSelector Plugin\";\n};\n\nrangeSelector.prototype.activate = function(dygraph) {\n  this.dygraph_ = dygraph;\n  if (this.getOption_('showRangeSelector')) {\n    this.createInterface_();\n  }\n  return {\n    layout: this.reserveSpace_,\n    predraw: this.renderStaticLayer_,\n    didDrawChart: this.renderInteractiveLayer_\n  };\n};\n\nrangeSelector.prototype.destroy = function() {\n  this.bgcanvas_ = null;\n  this.fgcanvas_ = null;\n  this.leftZoomHandle_ = null;\n  this.rightZoomHandle_ = null;\n};\n\n//------------------------------------------------------------------\n// Private methods\n//------------------------------------------------------------------\n\nrangeSelector.prototype.getOption_ = function(name, opt_series) {\n  return this.dygraph_.getOption(name, opt_series);\n};\n\nrangeSelector.prototype.setDefaultOption_ = function(name, value) {\n  this.dygraph_.attrs_[name] = value;\n};\n\n/**\n * @private\n * Creates the range selector elements and adds them to the graph.\n */\nrangeSelector.prototype.createInterface_ = function() {\n  this.createCanvases_();\n  this.createZoomHandles_();\n  this.initInteraction_();\n\n  // Range selector and animatedZooms have a bad interaction. See issue 359.\n  if (this.getOption_('animatedZooms')) {\n    console.warn('Animated zooms and range selector are not compatible; disabling animatedZooms.');\n    this.dygraph_.updateOptions({animatedZooms: false}, true);\n  }\n\n  this.interfaceCreated_ = true;\n  this.addToGraph_();\n};\n\n/**\n * @private\n * Adds the range selector to the graph.\n */\nrangeSelector.prototype.addToGraph_ = function() {\n  var graphDiv = this.graphDiv_ = this.dygraph_.graphDiv;\n  graphDiv.appendChild(this.bgcanvas_);\n  graphDiv.appendChild(this.fgcanvas_);\n  graphDiv.appendChild(this.leftZoomHandle_);\n  graphDiv.appendChild(this.rightZoomHandle_);\n};\n\n/**\n * @private\n * Removes the range selector from the graph.\n */\nrangeSelector.prototype.removeFromGraph_ = function() {\n  var graphDiv = this.graphDiv_;\n  graphDiv.removeChild(this.bgcanvas_);\n  graphDiv.removeChild(this.fgcanvas_);\n  graphDiv.removeChild(this.leftZoomHandle_);\n  graphDiv.removeChild(this.rightZoomHandle_);\n  this.graphDiv_ = null;\n};\n\n/**\n * @private\n * Called by Layout to allow range selector to reserve its space.\n */\nrangeSelector.prototype.reserveSpace_ = function(e) {\n  if (this.getOption_('showRangeSelector')) {\n    e.reserveSpaceBottom(this.getOption_('rangeSelectorHeight') + 4);\n  }\n};\n\n/**\n * @private\n * Renders the static portion of the range selector at the predraw stage.\n */\nrangeSelector.prototype.renderStaticLayer_ = function() {\n  if (!this.updateVisibility_()) {\n    return;\n  }\n  this.resize_();\n  this.drawStaticLayer_();\n};\n\n/**\n * @private\n * Renders the interactive portion of the range selector after the chart has been drawn.\n */\nrangeSelector.prototype.renderInteractiveLayer_ = function() {\n  if (!this.updateVisibility_() || this.isChangingRange_) {\n    return;\n  }\n  this.placeZoomHandles_();\n  this.drawInteractiveLayer_();\n};\n\n/**\n * @private\n * Check to see if the range selector is enabled/disabled and update visibility accordingly.\n */\nrangeSelector.prototype.updateVisibility_ = function() {\n  var enabled = this.getOption_('showRangeSelector');\n  if (enabled) {\n    if (!this.interfaceCreated_) {\n      this.createInterface_();\n    } else if (!this.graphDiv_ || !this.graphDiv_.parentNode) {\n      this.addToGraph_();\n    }\n  } else if (this.graphDiv_) {\n    this.removeFromGraph_();\n    var dygraph = this.dygraph_;\n    setTimeout(function() { dygraph.width_ = 0; dygraph.resize(); }, 1);\n  }\n  return enabled;\n};\n\n/**\n * @private\n * Resizes the range selector.\n */\nrangeSelector.prototype.resize_ = function() {\n  function setElementRect(canvas, context, rect, pixelRatioOption) {\n    var canvasScale = pixelRatioOption || utils.getContextPixelRatio(context);\n\n    canvas.style.top = rect.y + 'px';\n    canvas.style.left = rect.x + 'px';\n    canvas.width = rect.w * canvasScale;\n    canvas.height = rect.h * canvasScale;\n    canvas.style.width = rect.w + 'px';\n    canvas.style.height = rect.h + 'px';\n\n    if(canvasScale != 1) {\n      context.scale(canvasScale, canvasScale);\n    }\n  }\n\n  var plotArea = this.dygraph_.layout_.getPlotArea();\n\n  var xAxisLabelHeight = 0;\n  if (this.dygraph_.getOptionForAxis('drawAxis', 'x')) {\n    xAxisLabelHeight = this.getOption_('xAxisHeight') || (this.getOption_('axisLabelFontSize') + 2 * this.getOption_('axisTickSize'));\n  }\n  this.canvasRect_ = {\n    x: plotArea.x,\n    y: plotArea.y + plotArea.h + xAxisLabelHeight + 4,\n    w: plotArea.w,\n    h: this.getOption_('rangeSelectorHeight')\n  };\n\n  var pixelRatioOption = this.dygraph_.getNumericOption('pixelRatio');\n  setElementRect(this.bgcanvas_, this.bgcanvas_ctx_, this.canvasRect_, pixelRatioOption);\n  setElementRect(this.fgcanvas_, this.fgcanvas_ctx_, this.canvasRect_, pixelRatioOption);\n};\n\n/**\n * @private\n * Creates the background and foreground canvases.\n */\nrangeSelector.prototype.createCanvases_ = function() {\n  this.bgcanvas_ = utils.createCanvas();\n  this.bgcanvas_.className = 'dygraph-rangesel-bgcanvas';\n  this.bgcanvas_.style.position = 'absolute';\n  this.bgcanvas_.style.zIndex = 9;\n  this.bgcanvas_ctx_ = utils.getContext(this.bgcanvas_);\n\n  this.fgcanvas_ = utils.createCanvas();\n  this.fgcanvas_.className = 'dygraph-rangesel-fgcanvas';\n  this.fgcanvas_.style.position = 'absolute';\n  this.fgcanvas_.style.zIndex = 9;\n  this.fgcanvas_.style.cursor = 'default';\n  this.fgcanvas_ctx_ = utils.getContext(this.fgcanvas_);\n};\n\n/**\n * @private\n * Creates the zoom handle elements.\n */\nrangeSelector.prototype.createZoomHandles_ = function() {\n  var img = new Image();\n  img.className = 'dygraph-rangesel-zoomhandle';\n  img.style.position = 'absolute';\n  img.style.zIndex = 10;\n  img.style.visibility = 'hidden'; // Initially hidden so they don't show up in the wrong place.\n  img.style.cursor = 'col-resize';\n  // TODO: change image to more options\n  img.width = 9;\n  img.height = 16;\n  img.src = 'data:image/png;base64,' +\n'iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAA' +\n'zwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENv' +\n'bW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl' +\n'6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7s' +\n'qSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII=';\n\n  if (this.isMobileDevice_) {\n    img.width *= 2;\n    img.height *= 2;\n  }\n\n  this.leftZoomHandle_ = img;\n  this.rightZoomHandle_ = img.cloneNode(false);\n};\n\n/**\n * @private\n * Sets up the interaction for the range selector.\n */\nrangeSelector.prototype.initInteraction_ = function() {\n  var self = this;\n  var topElem = document;\n  var clientXLast = 0;\n  var handle = null;\n  var isZooming = false;\n  var isPanning = false;\n  var dynamic = !this.isMobileDevice_;\n\n  // We cover iframes during mouse interactions. See comments in\n  // dygraph-utils.js for more info on why this is a good idea.\n  var tarp = new IFrameTarp();\n\n  // functions, defined below.  Defining them this way (rather than with\n  // \"function foo() {...}\") makes JSHint happy.\n  var toXDataWindow, onZoomStart, onZoom, onZoomEnd, doZoom, isMouseInPanZone,\n      onPanStart, onPan, onPanEnd, doPan, onCanvasHover;\n\n  // Touch event functions\n  var onZoomHandleTouchEvent, onCanvasTouchEvent, addTouchEvents;\n\n  toXDataWindow = function(zoomHandleStatus) {\n    var xDataLimits = self.dygraph_.xAxisExtremes();\n    var fact = (xDataLimits[1] - xDataLimits[0])/self.canvasRect_.w;\n    var xDataMin = xDataLimits[0] + (zoomHandleStatus.leftHandlePos - self.canvasRect_.x)*fact;\n    var xDataMax = xDataLimits[0] + (zoomHandleStatus.rightHandlePos - self.canvasRect_.x)*fact;\n    return [xDataMin, xDataMax];\n  };\n\n  onZoomStart = function(e) {\n    utils.cancelEvent(e);\n    isZooming = true;\n    clientXLast = e.clientX;\n    handle = e.target ? e.target : e.srcElement;\n    if (e.type === 'mousedown' || e.type === 'dragstart') {\n      // These events are removed manually.\n      utils.addEvent(topElem, 'mousemove', onZoom);\n      utils.addEvent(topElem, 'mouseup', onZoomEnd);\n    }\n    self.fgcanvas_.style.cursor = 'col-resize';\n    tarp.cover();\n    return true;\n  };\n\n  onZoom = function(e) {\n    if (!isZooming) {\n      return false;\n    }\n    utils.cancelEvent(e);\n\n    var delX = e.clientX - clientXLast;\n    if (Math.abs(delX) < 4) {\n      return true;\n    }\n    clientXLast = e.clientX;\n\n    // Move handle.\n    var zoomHandleStatus = self.getZoomHandleStatus_();\n    var newPos;\n    if (handle == self.leftZoomHandle_) {\n      newPos = zoomHandleStatus.leftHandlePos + delX;\n      newPos = Math.min(newPos, zoomHandleStatus.rightHandlePos - handle.width - 3);\n      newPos = Math.max(newPos, self.canvasRect_.x);\n    } else {\n      newPos = zoomHandleStatus.rightHandlePos + delX;\n      newPos = Math.min(newPos, self.canvasRect_.x + self.canvasRect_.w);\n      newPos = Math.max(newPos, zoomHandleStatus.leftHandlePos + handle.width + 3);\n    }\n    var halfHandleWidth = handle.width/2;\n    handle.style.left = (newPos - halfHandleWidth) + 'px';\n    self.drawInteractiveLayer_();\n\n    // Zoom on the fly.\n    if (dynamic) {\n      doZoom();\n    }\n    return true;\n  };\n\n  onZoomEnd = function(e) {\n    if (!isZooming) {\n      return false;\n    }\n    isZooming = false;\n    tarp.uncover();\n    utils.removeEvent(topElem, 'mousemove', onZoom);\n    utils.removeEvent(topElem, 'mouseup', onZoomEnd);\n    self.fgcanvas_.style.cursor = 'default';\n\n    // If on a slower device, zoom now.\n    if (!dynamic) {\n      doZoom();\n    }\n    return true;\n  };\n\n  doZoom = function() {\n    try {\n      var zoomHandleStatus = self.getZoomHandleStatus_();\n      self.isChangingRange_ = true;\n      if (!zoomHandleStatus.isZoomed) {\n        self.dygraph_.resetZoom();\n      } else {\n        var xDataWindow = toXDataWindow(zoomHandleStatus);\n        self.dygraph_.doZoomXDates_(xDataWindow[0], xDataWindow[1]);\n      }\n    } finally {\n      self.isChangingRange_ = false;\n    }\n  };\n\n  isMouseInPanZone = function(e) {\n    var rect = self.leftZoomHandle_.getBoundingClientRect();\n    var leftHandleClientX = rect.left + rect.width/2;\n    rect = self.rightZoomHandle_.getBoundingClientRect();\n    var rightHandleClientX = rect.left + rect.width/2;\n    return (e.clientX > leftHandleClientX && e.clientX < rightHandleClientX);\n  };\n\n  onPanStart = function(e) {\n    if (!isPanning && isMouseInPanZone(e) && self.getZoomHandleStatus_().isZoomed) {\n      utils.cancelEvent(e);\n      isPanning = true;\n      clientXLast = e.clientX;\n      if (e.type === 'mousedown') {\n        // These events are removed manually.\n        utils.addEvent(topElem, 'mousemove', onPan);\n        utils.addEvent(topElem, 'mouseup', onPanEnd);\n      }\n      return true;\n    }\n    return false;\n  };\n\n  onPan = function(e) {\n    if (!isPanning) {\n      return false;\n    }\n    utils.cancelEvent(e);\n\n    var delX = e.clientX - clientXLast;\n    if (Math.abs(delX) < 4) {\n      return true;\n    }\n    clientXLast = e.clientX;\n\n    // Move range view\n    var zoomHandleStatus = self.getZoomHandleStatus_();\n    var leftHandlePos = zoomHandleStatus.leftHandlePos;\n    var rightHandlePos = zoomHandleStatus.rightHandlePos;\n    var rangeSize = rightHandlePos - leftHandlePos;\n    if (leftHandlePos + delX <= self.canvasRect_.x) {\n      leftHandlePos = self.canvasRect_.x;\n      rightHandlePos = leftHandlePos + rangeSize;\n    } else if (rightHandlePos + delX >= self.canvasRect_.x + self.canvasRect_.w) {\n      rightHandlePos = self.canvasRect_.x + self.canvasRect_.w;\n      leftHandlePos = rightHandlePos - rangeSize;\n    } else {\n      leftHandlePos += delX;\n      rightHandlePos += delX;\n    }\n    var halfHandleWidth = self.leftZoomHandle_.width/2;\n    self.leftZoomHandle_.style.left = (leftHandlePos - halfHandleWidth) + 'px';\n    self.rightZoomHandle_.style.left = (rightHandlePos - halfHandleWidth) + 'px';\n    self.drawInteractiveLayer_();\n\n    // Do pan on the fly.\n    if (dynamic) {\n      doPan();\n    }\n    return true;\n  };\n\n  onPanEnd = function(e) {\n    if (!isPanning) {\n      return false;\n    }\n    isPanning = false;\n    utils.removeEvent(topElem, 'mousemove', onPan);\n    utils.removeEvent(topElem, 'mouseup', onPanEnd);\n    // If on a slower device, do pan now.\n    if (!dynamic) {\n      doPan();\n    }\n    return true;\n  };\n\n  doPan = function() {\n    try {\n      self.isChangingRange_ = true;\n      self.dygraph_.dateWindow_ = toXDataWindow(self.getZoomHandleStatus_());\n      self.dygraph_.drawGraph_(false);\n    } finally {\n      self.isChangingRange_ = false;\n    }\n  };\n\n  onCanvasHover = function(e) {\n    if (isZooming || isPanning) {\n      return;\n    }\n    var cursor = isMouseInPanZone(e) ? 'move' : 'default';\n    if (cursor != self.fgcanvas_.style.cursor) {\n      self.fgcanvas_.style.cursor = cursor;\n    }\n  };\n\n  onZoomHandleTouchEvent = function(e) {\n    if (e.type == 'touchstart' && e.targetTouches.length == 1) {\n      if (onZoomStart(e.targetTouches[0])) {\n        utils.cancelEvent(e);\n      }\n    } else if (e.type == 'touchmove' && e.targetTouches.length == 1) {\n      if (onZoom(e.targetTouches[0])) {\n        utils.cancelEvent(e);\n      }\n    } else {\n      onZoomEnd(e);\n    }\n  };\n\n  onCanvasTouchEvent = function(e) {\n    if (e.type == 'touchstart' && e.targetTouches.length == 1) {\n      if (onPanStart(e.targetTouches[0])) {\n        utils.cancelEvent(e);\n      }\n    } else if (e.type == 'touchmove' && e.targetTouches.length == 1) {\n      if (onPan(e.targetTouches[0])) {\n        utils.cancelEvent(e);\n      }\n    } else {\n      onPanEnd(e);\n    }\n  };\n\n  addTouchEvents = function(elem, fn) {\n    var types = ['touchstart', 'touchend', 'touchmove', 'touchcancel'];\n    for (var i = 0; i < types.length; i++) {\n      self.dygraph_.addAndTrackEvent(elem, types[i], fn);\n    }\n  };\n\n  this.setDefaultOption_('interactionModel', DygraphInteraction.dragIsPanInteractionModel);\n  this.setDefaultOption_('panEdgeFraction', 0.0001);\n\n  var dragStartEvent = window.opera ? 'mousedown' : 'dragstart';\n  this.dygraph_.addAndTrackEvent(this.leftZoomHandle_, dragStartEvent, onZoomStart);\n  this.dygraph_.addAndTrackEvent(this.rightZoomHandle_, dragStartEvent, onZoomStart);\n\n  this.dygraph_.addAndTrackEvent(this.fgcanvas_, 'mousedown', onPanStart);\n  this.dygraph_.addAndTrackEvent(this.fgcanvas_, 'mousemove', onCanvasHover);\n\n  // Touch events\n  if (this.hasTouchInterface_) {\n    addTouchEvents(this.leftZoomHandle_, onZoomHandleTouchEvent);\n    addTouchEvents(this.rightZoomHandle_, onZoomHandleTouchEvent);\n    addTouchEvents(this.fgcanvas_, onCanvasTouchEvent);\n  }\n};\n\n/**\n * @private\n * Draws the static layer in the background canvas.\n */\nrangeSelector.prototype.drawStaticLayer_ = function() {\n  var ctx = this.bgcanvas_ctx_;\n  ctx.clearRect(0, 0, this.canvasRect_.w, this.canvasRect_.h);\n  try {\n    this.drawMiniPlot_();\n  } catch(ex) {\n    console.warn(ex);\n  }\n\n  var margin = 0.5;\n  this.bgcanvas_ctx_.lineWidth = this.getOption_('rangeSelectorBackgroundLineWidth');\n  ctx.strokeStyle = this.getOption_('rangeSelectorBackgroundStrokeColor');\n  ctx.beginPath();\n  ctx.moveTo(margin, margin);\n  ctx.lineTo(margin, this.canvasRect_.h-margin);\n  ctx.lineTo(this.canvasRect_.w-margin, this.canvasRect_.h-margin);\n  ctx.lineTo(this.canvasRect_.w-margin, margin);\n  ctx.stroke();\n};\n\n/**\n * @private\n * Draws the mini plot in the background canvas.\n */\nrangeSelector.prototype.drawMiniPlot_ = function() {\n  var fillStyle = this.getOption_('rangeSelectorPlotFillColor');\n  var fillGradientStyle = this.getOption_('rangeSelectorPlotFillGradientColor');\n  var strokeStyle = this.getOption_('rangeSelectorPlotStrokeColor');\n  if (!fillStyle && !strokeStyle) {\n    return;\n  }\n\n  var stepPlot = this.getOption_('stepPlot');\n\n  var combinedSeriesData = this.computeCombinedSeriesAndLimits_();\n  var yRange = combinedSeriesData.yMax - combinedSeriesData.yMin;\n\n  // Draw the mini plot.\n  var ctx = this.bgcanvas_ctx_;\n  var margin = 0.5;\n\n  var xExtremes = this.dygraph_.xAxisExtremes();\n  var xRange = Math.max(xExtremes[1] - xExtremes[0], 1.e-30);\n  var xFact = (this.canvasRect_.w - margin)/xRange;\n  var yFact = (this.canvasRect_.h - margin)/yRange;\n  var canvasWidth = this.canvasRect_.w - margin;\n  var canvasHeight = this.canvasRect_.h - margin;\n\n  var prevX = null, prevY = null;\n\n  ctx.beginPath();\n  ctx.moveTo(margin, canvasHeight);\n  for (var i = 0; i < combinedSeriesData.data.length; i++) {\n    var dataPoint = combinedSeriesData.data[i];\n    var x = ((dataPoint[0] !== null) ? ((dataPoint[0] - xExtremes[0])*xFact) : NaN);\n    var y = ((dataPoint[1] !== null) ? (canvasHeight - (dataPoint[1] - combinedSeriesData.yMin)*yFact) : NaN);\n\n    // Skip points that don't change the x-value. Overly fine-grained points\n    // can cause major slowdowns with the ctx.fill() call below.\n    if (!stepPlot && prevX !== null && Math.round(x) == Math.round(prevX)) {\n      continue;\n    }\n\n    if (isFinite(x) && isFinite(y)) {\n      if(prevX === null) {\n        ctx.lineTo(x, canvasHeight);\n      }\n      else if (stepPlot) {\n        ctx.lineTo(x, prevY);\n      }\n      ctx.lineTo(x, y);\n      prevX = x;\n      prevY = y;\n    }\n    else {\n      if(prevX !== null) {\n        if (stepPlot) {\n          ctx.lineTo(x, prevY);\n          ctx.lineTo(x, canvasHeight);\n        }\n        else {\n          ctx.lineTo(prevX, canvasHeight);\n        }\n      }\n      prevX = prevY = null;\n    }\n  }\n  ctx.lineTo(canvasWidth, canvasHeight);\n  ctx.closePath();\n\n  if (fillStyle) {\n    var lingrad = this.bgcanvas_ctx_.createLinearGradient(0, 0, 0, canvasHeight);\n    if (fillGradientStyle) {\n      lingrad.addColorStop(0, fillGradientStyle);\n    }\n    lingrad.addColorStop(1, fillStyle);\n    this.bgcanvas_ctx_.fillStyle = lingrad;\n    ctx.fill();\n  }\n\n  if (strokeStyle) {\n    this.bgcanvas_ctx_.strokeStyle = strokeStyle;\n    this.bgcanvas_ctx_.lineWidth = this.getOption_('rangeSelectorPlotLineWidth');\n    ctx.stroke();\n  }\n};\n\n/**\n * @private\n * Computes and returns the combined series data along with min/max for the mini plot.\n * The combined series consists of averaged values for all series.\n * When series have error bars, the error bars are ignored.\n * @return {Object} An object containing combined series array, ymin, ymax.\n */\nrangeSelector.prototype.computeCombinedSeriesAndLimits_ = function() {\n  var g = this.dygraph_;\n  var logscale = this.getOption_('logscale');\n  var i;\n\n  // Select series to combine. By default, all series are combined.\n  var numColumns = g.numColumns();\n  var labels = g.getLabels();\n  var includeSeries = new Array(numColumns);\n  var anySet = false;\n  var visibility = g.visibility();\n  var inclusion = [];\n\n  for (i = 1; i < numColumns; i++) {\n    var include = this.getOption_('showInRangeSelector', labels[i]);\n    inclusion.push(include);\n    if (include !== null) anySet = true;  // it's set explicitly for this series\n  }\n\n  if (anySet) {\n    for (i = 1; i < numColumns; i++) {\n      includeSeries[i] = inclusion[i - 1];\n    }\n  } else {\n    for (i = 1; i < numColumns; i++) {\n      includeSeries[i] = visibility[i - 1];\n    }\n  }\n\n  // Create a combined series (average of selected series values).\n  // TODO(danvk): short-circuit if there's only one series.\n  var rolledSeries = [];\n  var dataHandler = g.dataHandler_;\n  var options = g.attributes_;\n  for (i = 1; i < g.numColumns(); i++) {\n    if (!includeSeries[i]) continue;\n    var series = dataHandler.extractSeries(g.rawData_, i, options);\n    if (g.rollPeriod() > 1) {\n      series = dataHandler.rollingAverage(series, g.rollPeriod(), options, i);\n    }\n\n    rolledSeries.push(series);\n  }\n\n  var combinedSeries = [];\n  for (i = 0; i < rolledSeries[0].length; i++) {\n    var sum = 0;\n    var count = 0;\n    for (var j = 0; j < rolledSeries.length; j++) {\n      var y = rolledSeries[j][i][1];\n      if (y === null || isNaN(y)) continue;\n      count++;\n      sum += y;\n    }\n    combinedSeries.push([rolledSeries[0][i][0], sum / count]);\n  }\n\n  // Compute the y range.\n  var yMin = Number.MAX_VALUE;\n  var yMax = -Number.MAX_VALUE;\n  for (i = 0; i < combinedSeries.length; i++) {\n    var yVal = combinedSeries[i][1];\n    if (yVal !== null && isFinite(yVal) && (!logscale || yVal > 0)) {\n      yMin = Math.min(yMin, yVal);\n      yMax = Math.max(yMax, yVal);\n    }\n  }\n\n  // Convert Y data to log scale if needed.\n  // Also, expand the Y range to compress the mini plot a little.\n  var extraPercent = 0.25;\n  if (logscale) {\n    yMax = utils.log10(yMax);\n    yMax += yMax*extraPercent;\n    yMin = utils.log10(yMin);\n    for (i = 0; i < combinedSeries.length; i++) {\n      combinedSeries[i][1] = utils.log10(combinedSeries[i][1]);\n    }\n  } else {\n    var yExtra;\n    var yRange = yMax - yMin;\n    if (yRange <= Number.MIN_VALUE) {\n      yExtra = yMax*extraPercent;\n    } else {\n      yExtra = yRange*extraPercent;\n    }\n    yMax += yExtra;\n    yMin -= yExtra;\n  }\n\n  return {data: combinedSeries, yMin: yMin, yMax: yMax};\n};\n\n/**\n * @private\n * Places the zoom handles in the proper position based on the current X data window.\n */\nrangeSelector.prototype.placeZoomHandles_ = function() {\n  var xExtremes = this.dygraph_.xAxisExtremes();\n  var xWindowLimits = this.dygraph_.xAxisRange();\n  var xRange = xExtremes[1] - xExtremes[0];\n  var leftPercent = Math.max(0, (xWindowLimits[0] - xExtremes[0])/xRange);\n  var rightPercent = Math.max(0, (xExtremes[1] - xWindowLimits[1])/xRange);\n  var leftCoord = this.canvasRect_.x + this.canvasRect_.w*leftPercent;\n  var rightCoord = this.canvasRect_.x + this.canvasRect_.w*(1 - rightPercent);\n  var handleTop = Math.max(this.canvasRect_.y, this.canvasRect_.y + (this.canvasRect_.h - this.leftZoomHandle_.height)/2);\n  var halfHandleWidth = this.leftZoomHandle_.width/2;\n  this.leftZoomHandle_.style.left = (leftCoord - halfHandleWidth) + 'px';\n  this.leftZoomHandle_.style.top = handleTop + 'px';\n  this.rightZoomHandle_.style.left = (rightCoord - halfHandleWidth) + 'px';\n  this.rightZoomHandle_.style.top = this.leftZoomHandle_.style.top;\n\n  this.leftZoomHandle_.style.visibility = 'visible';\n  this.rightZoomHandle_.style.visibility = 'visible';\n};\n\n/**\n * @private\n * Draws the interactive layer in the foreground canvas.\n */\nrangeSelector.prototype.drawInteractiveLayer_ = function() {\n  var ctx = this.fgcanvas_ctx_;\n  ctx.clearRect(0, 0, this.canvasRect_.w, this.canvasRect_.h);\n  var margin = 1;\n  var width = this.canvasRect_.w - margin;\n  var height = this.canvasRect_.h - margin;\n  var zoomHandleStatus = this.getZoomHandleStatus_();\n\n  ctx.strokeStyle = this.getOption_('rangeSelectorForegroundStrokeColor');\n  ctx.lineWidth = this.getOption_('rangeSelectorForegroundLineWidth');\n  if (!zoomHandleStatus.isZoomed) {\n    ctx.beginPath();\n    ctx.moveTo(margin, margin);\n    ctx.lineTo(margin, height);\n    ctx.lineTo(width, height);\n    ctx.lineTo(width, margin);\n    ctx.stroke();\n  } else {\n    var leftHandleCanvasPos = Math.max(margin, zoomHandleStatus.leftHandlePos - this.canvasRect_.x);\n    var rightHandleCanvasPos = Math.min(width, zoomHandleStatus.rightHandlePos - this.canvasRect_.x);\n\n    const veilColour = this.getOption_('rangeSelectorVeilColour');\n    ctx.fillStyle = veilColour ? veilColour :\n      ('rgba(240, 240, 240, ' + this.getOption_('rangeSelectorAlpha').toString() + ')');\n    ctx.fillRect(0, 0, leftHandleCanvasPos, this.canvasRect_.h);\n    ctx.fillRect(rightHandleCanvasPos, 0, this.canvasRect_.w - rightHandleCanvasPos, this.canvasRect_.h);\n\n    ctx.beginPath();\n    ctx.moveTo(margin, margin);\n    ctx.lineTo(leftHandleCanvasPos, margin);\n    ctx.lineTo(leftHandleCanvasPos, height);\n    ctx.lineTo(rightHandleCanvasPos, height);\n    ctx.lineTo(rightHandleCanvasPos, margin);\n    ctx.lineTo(width, margin);\n    ctx.stroke();\n  }\n};\n\n/**\n * @private\n * Returns the current zoom handle position information.\n * @return {Object} The zoom handle status.\n */\nrangeSelector.prototype.getZoomHandleStatus_ = function() {\n  var halfHandleWidth = this.leftZoomHandle_.width/2;\n  var leftHandlePos = parseFloat(this.leftZoomHandle_.style.left) + halfHandleWidth;\n  var rightHandlePos = parseFloat(this.rightZoomHandle_.style.left) + halfHandleWidth;\n  return {\n      leftHandlePos: leftHandlePos,\n      rightHandlePos: rightHandlePos,\n      isZoomed: (leftHandlePos - 1 > this.canvasRect_.x || rightHandlePos + 1 < this.canvasRect_.x+this.canvasRect_.w)\n  };\n};\n\nexport default rangeSelector;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}