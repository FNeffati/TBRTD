{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"../styling/Twitter.css\";import defaultAvatar from'../assets/avatar.jpg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Twitter(_ref){let{selectedFilters,onTweetsFetched,clickedWord}=_ref;const[tweets,setTweets]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[searchTerm,setSearchTerm]=useState('');const formatDate=dateObj=>{let isoDateString;if(typeof dateObj==='object'&&dateObj.hasOwnProperty('$date')){isoDateString=dateObj['$date'];}else{isoDateString=dateObj;}const date=new Date(isoDateString);if(isNaN(date.getTime())){console.error(\"Invalid Date:\",isoDateString);return\"Invalid Date\";}return date.toLocaleDateString(\"en-US\",{year:'numeric',month:'long',day:'numeric'});};const fetchTweets=()=>{fetch('/get_tweets',{'method':'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(selectedFilters)}).then(response=>response.json()).then(data=>{const tweetsSorted=data.sort((a,b)=>{const dateA=new Date(a.time.$date);const dateB=new Date(b.time.$date);return dateA-dateB;});setTweets(tweetsSorted);onTweetsFetched(data);setCurrentPage(1);}).catch(error=>console.error(error));};useEffect(()=>{fetchTweets();},[selectedFilters]);const highlightText=(text,term)=>{const regex=new RegExp(term,'gi');return text.replace(regex,match=>\"<span class=\\\"highlight\\\">\".concat(match,\"</span>\"));};const filteredTweets=tweets.filter(tweet=>tweet.text&&tweet.text.toLowerCase().includes(searchTerm.toLowerCase()));const[tweetsPerPage]=useState(10);const indexOfLastTweet=currentPage*tweetsPerPage;const indexOfFirstTweet=indexOfLastTweet-tweetsPerPage;const currentTweets=filteredTweets.slice(indexOfFirstTweet,indexOfLastTweet);const totalPages=Math.ceil(filteredTweets.length/tweetsPerPage);useEffect(()=>{setSearchTerm(clickedWord);},[clickedWord]);return/*#__PURE__*/_jsxs(\"div\",{className:\"twitter_container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tweets_header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search_bar_container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"tweet_search_bar\",type:\"text\",placeholder:\"Filter tweets\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{className:\"clear_button\",onClick:()=>setSearchTerm(''),children:\"Clear\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"tweets_container\",children:/*#__PURE__*/_jsx(\"ul\",{children:Array.isArray(currentTweets)&&currentTweets.length>0?currentTweets.map(tweet=>/*#__PURE__*/_jsxs(\"div\",{className:\"tweet\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tweet_top\",children:[/*#__PURE__*/_jsx(\"img\",{src:tweet.image,alt:\"#\",className:\"profile_image\"}),/*#__PURE__*/_jsxs(\"a\",{className:\"username\",target:\"_blank\",href:\"http://www.x.com/\"+tweet.username,children:[\"@\",tweet.username]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"tweet_mid\",children:/*#__PURE__*/_jsx(\"p\",{className:\"tweet_text\",dangerouslySetInnerHTML:{__html:highlightText(tweet.text,searchTerm)}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tweet_bottom\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"tweet_time\",children:formatDate(tweet.time)}),/*#__PURE__*/_jsx(\"p\",{className:\"tweet_location\",children:tweet.location})]})]})):/*#__PURE__*/_jsx(\"div\",{className:\"tweet_mid\",children:/*#__PURE__*/_jsx(\"p\",{className:\"no_match\",children:\"No Tweets match your filters.\"})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(currentPage-1),disabled:currentPage===1,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",currentPage,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(currentPage+1),disabled:currentPage===totalPages,children:\"Next\"})]})]});}export default Twitter;","map":{"version":3,"names":["React","useEffect","useState","defaultAvatar","jsx","_jsx","jsxs","_jsxs","Twitter","_ref","selectedFilters","onTweetsFetched","clickedWord","tweets","setTweets","currentPage","setCurrentPage","searchTerm","setSearchTerm","formatDate","dateObj","isoDateString","hasOwnProperty","date","Date","isNaN","getTime","console","error","toLocaleDateString","year","month","day","fetchTweets","fetch","headers","body","JSON","stringify","then","response","json","data","tweetsSorted","sort","a","b","dateA","time","$date","dateB","catch","highlightText","text","term","regex","RegExp","replace","match","concat","filteredTweets","filter","tweet","toLowerCase","includes","tweetsPerPage","indexOfLastTweet","indexOfFirstTweet","currentTweets","slice","totalPages","Math","ceil","length","className","children","type","placeholder","value","onChange","e","target","onClick","Array","isArray","map","src","image","alt","href","username","dangerouslySetInnerHTML","__html","location","disabled"],"sources":["/Users/fneffati/Documents/Classes/TBRTD/frontend/src/components/Twitter.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport \"../styling/Twitter.css\"\nimport defaultAvatar from '../assets/avatar.jpg';\n\n\n\nfunction Twitter({ selectedFilters, onTweetsFetched, clickedWord}) {\n    const [tweets, setTweets] = useState([]);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [searchTerm, setSearchTerm] = useState('');\n\n    const formatDate = (dateObj) => {\n        let isoDateString;\n        if (typeof dateObj === 'object' && dateObj.hasOwnProperty('$date')) {\n            isoDateString = dateObj['$date'];\n        } else {\n            isoDateString = dateObj;\n        }\n\n        const date = new Date(isoDateString);\n        if (isNaN(date.getTime())) {\n            console.error(\"Invalid Date:\", isoDateString);\n            return \"Invalid Date\";\n        }\n\n        return date.toLocaleDateString(\"en-US\", {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric'\n        });\n    };\n\n    const fetchTweets = () => {\n        fetch('/get_tweets',\n            {\n                'method': 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(selectedFilters)\n            })\n            .then((response) => response.json())\n            .then((data) => {\n                const tweetsSorted = data.sort((a, b) => {\n                    const dateA = new Date(a.time.$date)\n                    const dateB = new Date(b.time.$date)\n                    return dateA - dateB;\n                });\n                setTweets(tweetsSorted);\n                onTweetsFetched(data);\n                setCurrentPage(1);\n            })\n            .catch((error) => console.error(error));\n    };\n\n    useEffect(() => {\n        fetchTweets();\n    }, [selectedFilters]);\n\n    const highlightText = (text, term) => {\n        const regex = new RegExp(term, 'gi');\n        return text.replace(regex, (match) => `<span class=\"highlight\">${match}</span>`);\n    };\n\n    const filteredTweets = tweets.filter((tweet) =>\n        tweet.text && tweet.text.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    const [tweetsPerPage] = useState(10);\n\n    const indexOfLastTweet = currentPage * tweetsPerPage;\n    const indexOfFirstTweet = indexOfLastTweet - tweetsPerPage;\n    const currentTweets = filteredTweets.slice(indexOfFirstTweet, indexOfLastTweet);\n    const totalPages = Math.ceil(filteredTweets.length / tweetsPerPage);\n\n\n    useEffect(() =>{\n        setSearchTerm(clickedWord)\n    }, [clickedWord])\n\n    return(\n        <div className=\"twitter_container\">\n            <div className=\"tweets_header\">\n                <div className=\"search_bar_container\">\n                    <input\n                        className=\"tweet_search_bar\"\n                        type=\"text\"\n                        placeholder=\"Filter tweets\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                    />\n                    {searchTerm && (\n                        <button className=\"clear_button\" onClick={() => setSearchTerm('')}>\n                            Clear\n                        </button>\n                    )}\n                </div>\n            </div>\n\n\n            <div className=\"tweets_container\">\n                <ul>\n                    {Array.isArray(currentTweets) && currentTweets.length > 0 ? (\n                        currentTweets.map((tweet) => (\n                            <div className=\"tweet\">\n                                <div className=\"tweet_top\">\n                                    <img\n                                        src={tweet.image}\n                                        alt={\"#\"}\n                                        className=\"profile_image\"\n                                    />\n                                    <a className=\"username\" target=\"_blank\" href={\"http://www.x.com/\" + tweet.username}>@{tweet.username}</a>\n                                </div>\n\n                                <div className=\"tweet_mid\">\n                                    <p\n                                        className=\"tweet_text\"\n                                        dangerouslySetInnerHTML={{\n                                            __html: highlightText(tweet.text, searchTerm),\n                                        }}\n                                    ></p>\n                                </div>\n\n                                <div className=\"tweet_bottom\">\n                                    <p className=\"tweet_time\">{formatDate(tweet.time)}</p>\n                                    <p className=\"tweet_location\">{tweet.location}</p>\n                                </div>\n\n                            </div>\n                        ))\n                    ) : (\n                        <div className=\"tweet_mid\">\n                            <p className=\"no_match\">No Tweets match your filters.</p>\n                        </div>\n                    )}\n                </ul>\n            </div>\n            <div className=\"pagination\">\n                <button onClick={() => setCurrentPage(currentPage - 1)} disabled={currentPage === 1}>\n                    Previous\n                </button>\n                <span>Page {currentPage} of {totalPages}</span>\n                <button onClick={() => setCurrentPage(currentPage + 1)} disabled={currentPage === totalPages}>\n                    Next\n                </button>\n            </div>\n        </div>\n    )\n}\n\nexport default Twitter;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}