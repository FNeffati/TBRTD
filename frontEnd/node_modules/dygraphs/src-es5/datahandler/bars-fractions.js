/**
 * @license
 * Copyright 2013 David Eberlein (david.eberlein@ch.sauter-bc.com)
 * MIT-licenced: https://opensource.org/licenses/MIT
 */

/**
 * @fileoverview DataHandler implementation for the combination
 * of error bars and fractions options.
 * @author David Eberlein (david.eberlein@ch.sauter-bc.com)
 */

/*global Dygraph:false */
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _bars = _interopRequireDefault(require("./bars"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }
/**
 * @constructor
 * @extends Dygraph.DataHandlers.BarsHandler
 */
var FractionsBarsHandler = function FractionsBarsHandler() {};
FractionsBarsHandler.prototype = new _bars["default"]();

/** @inheritDoc */
FractionsBarsHandler.prototype.extractSeries = function (rawData, i, options) {
  // TODO(danvk): pre-allocate series here.
  var series = [];
  var x, y, point, num, den, value, stddev, variance;
  var mult = 100.0;
  var seriesLabel = options.get("labels")[i];
  var logScale = options.getForSeries("logscale", seriesLabel);
  var sigma = options.getForSeries("sigma", seriesLabel);
  for (var j = 0; j < rawData.length; j++) {
    x = rawData[j][0];
    point = rawData[j][i];
    if (logScale && point !== null) {
      // On the log scale, points less than zero do not exist.
      // This will create a gap in the chart.
      if (point[0] <= 0 || point[1] <= 0) {
        point = null;
      }
    }
    // Extract to the unified data format.
    if (point !== null) {
      num = point[0];
      den = point[1];
      if (num !== null && !isNaN(num)) {
        value = den ? num / den : 0.0;
        stddev = den ? sigma * Math.sqrt(value * (1 - value) / den) : 1.0;
        variance = mult * stddev;
        y = mult * value;
        // preserve original values in extras for further filtering
        series.push([x, y, [y - variance, y + variance, num, den]]);
      } else {
        series.push([x, num, [num, num, num, den]]);
      }
    } else {
      series.push([x, null, [null, null, null, null]]);
    }
  }
  return series;
};

/** @inheritDoc */
FractionsBarsHandler.prototype.rollingAverage = function (originalData, rollPeriod, options, i) {
  rollPeriod = Math.min(rollPeriod, originalData.length);
  var rollingData = [];
  var seriesLabel = options.get("labels")[i];
  var sigma = options.getForSeries("sigma", seriesLabel);
  var wilsonInterval = options.getForSeries("wilsonInterval", seriesLabel);
  var low, high, i, stddev;
  var num = 0;
  var den = 0; // numerator/denominator
  var mult = 100.0;
  for (i = 0; i < originalData.length; i++) {
    num += originalData[i][2][2];
    den += originalData[i][2][3];
    if (i - rollPeriod >= 0) {
      num -= originalData[i - rollPeriod][2][2];
      den -= originalData[i - rollPeriod][2][3];
    }
    var date = originalData[i][0];
    var value = den ? num / den : 0.0;
    if (wilsonInterval) {
      // For more details on this confidence interval, see:
      // https://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval
      if (den) {
        var p = value < 0 ? 0 : value,
          n = den;
        var pm = sigma * Math.sqrt(p * (1 - p) / n + sigma * sigma / (4 * n * n));
        var denom = 1 + sigma * sigma / den;
        low = (p + sigma * sigma / (2 * den) - pm) / denom;
        high = (p + sigma * sigma / (2 * den) + pm) / denom;
        rollingData[i] = [date, p * mult, [low * mult, high * mult]];
      } else {
        rollingData[i] = [date, 0, [0, 0]];
      }
    } else {
      stddev = den ? sigma * Math.sqrt(value * (1 - value) / den) : 1.0;
      rollingData[i] = [date, mult * value, [mult * (value - stddev), mult * (value + stddev)]];
    }
  }
  return rollingData;
};
var _default = FractionsBarsHandler;
exports["default"] = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJGcmFjdGlvbnNCYXJzSGFuZGxlciIsInByb3RvdHlwZSIsIkJhcnNIYW5kbGVyIiwiZXh0cmFjdFNlcmllcyIsInJhd0RhdGEiLCJpIiwib3B0aW9ucyIsInNlcmllcyIsIngiLCJ5IiwicG9pbnQiLCJudW0iLCJkZW4iLCJ2YWx1ZSIsInN0ZGRldiIsInZhcmlhbmNlIiwibXVsdCIsInNlcmllc0xhYmVsIiwiZ2V0IiwibG9nU2NhbGUiLCJnZXRGb3JTZXJpZXMiLCJzaWdtYSIsImoiLCJsZW5ndGgiLCJpc05hTiIsIk1hdGgiLCJzcXJ0IiwicHVzaCIsInJvbGxpbmdBdmVyYWdlIiwib3JpZ2luYWxEYXRhIiwicm9sbFBlcmlvZCIsIm1pbiIsInJvbGxpbmdEYXRhIiwid2lsc29uSW50ZXJ2YWwiLCJsb3ciLCJoaWdoIiwiZGF0ZSIsInAiLCJuIiwicG0iLCJkZW5vbSJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kYXRhaGFuZGxlci9iYXJzLWZyYWN0aW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxMyBEYXZpZCBFYmVybGVpbiAoZGF2aWQuZWJlcmxlaW5AY2guc2F1dGVyLWJjLmNvbSlcbiAqIE1JVC1saWNlbmNlZDogaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgRGF0YUhhbmRsZXIgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBjb21iaW5hdGlvblxuICogb2YgZXJyb3IgYmFycyBhbmQgZnJhY3Rpb25zIG9wdGlvbnMuXG4gKiBAYXV0aG9yIERhdmlkIEViZXJsZWluIChkYXZpZC5lYmVybGVpbkBjaC5zYXV0ZXItYmMuY29tKVxuICovXG5cbi8qZ2xvYmFsIER5Z3JhcGg6ZmFsc2UgKi9cblwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgQmFyc0hhbmRsZXIgZnJvbSAnLi9iYXJzJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIER5Z3JhcGguRGF0YUhhbmRsZXJzLkJhcnNIYW5kbGVyXG4gKi9cbnZhciBGcmFjdGlvbnNCYXJzSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xufTtcblxuRnJhY3Rpb25zQmFyc0hhbmRsZXIucHJvdG90eXBlID0gbmV3IEJhcnNIYW5kbGVyKCk7XG5cbi8qKiBAaW5oZXJpdERvYyAqL1xuRnJhY3Rpb25zQmFyc0hhbmRsZXIucHJvdG90eXBlLmV4dHJhY3RTZXJpZXMgPSBmdW5jdGlvbihyYXdEYXRhLCBpLCBvcHRpb25zKSB7XG4gIC8vIFRPRE8oZGFudmspOiBwcmUtYWxsb2NhdGUgc2VyaWVzIGhlcmUuXG4gIHZhciBzZXJpZXMgPSBbXTtcbiAgdmFyIHgsIHksIHBvaW50LCBudW0sIGRlbiwgdmFsdWUsIHN0ZGRldiwgdmFyaWFuY2U7XG4gIHZhciBtdWx0ID0gMTAwLjA7XG4gIGNvbnN0IHNlcmllc0xhYmVsID0gb3B0aW9ucy5nZXQoXCJsYWJlbHNcIilbaV07XG4gIGNvbnN0IGxvZ1NjYWxlID0gb3B0aW9ucy5nZXRGb3JTZXJpZXMoXCJsb2dzY2FsZVwiLCBzZXJpZXNMYWJlbCk7XG4gIGNvbnN0IHNpZ21hID0gb3B0aW9ucy5nZXRGb3JTZXJpZXMoXCJzaWdtYVwiLCBzZXJpZXNMYWJlbCk7XG4gIGZvciAoIHZhciBqID0gMDsgaiA8IHJhd0RhdGEubGVuZ3RoOyBqKyspIHtcbiAgICB4ID0gcmF3RGF0YVtqXVswXTtcbiAgICBwb2ludCA9IHJhd0RhdGFbal1baV07XG4gICAgaWYgKGxvZ1NjYWxlICYmIHBvaW50ICE9PSBudWxsKSB7XG4gICAgICAvLyBPbiB0aGUgbG9nIHNjYWxlLCBwb2ludHMgbGVzcyB0aGFuIHplcm8gZG8gbm90IGV4aXN0LlxuICAgICAgLy8gVGhpcyB3aWxsIGNyZWF0ZSBhIGdhcCBpbiB0aGUgY2hhcnQuXG4gICAgICBpZiAocG9pbnRbMF0gPD0gMCB8fCBwb2ludFsxXSA8PSAwKSB7XG4gICAgICAgIHBvaW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gRXh0cmFjdCB0byB0aGUgdW5pZmllZCBkYXRhIGZvcm1hdC5cbiAgICBpZiAocG9pbnQgIT09IG51bGwpIHtcbiAgICAgIG51bSA9IHBvaW50WzBdO1xuICAgICAgZGVuID0gcG9pbnRbMV07XG4gICAgICBpZiAobnVtICE9PSBudWxsICYmICFpc05hTihudW0pKSB7XG4gICAgICAgIHZhbHVlID0gZGVuID8gbnVtIC8gZGVuIDogMC4wO1xuICAgICAgICBzdGRkZXYgPSBkZW4gPyBzaWdtYSAqIE1hdGguc3FydCh2YWx1ZSAqICgxIC0gdmFsdWUpIC8gZGVuKSA6IDEuMDtcbiAgICAgICAgdmFyaWFuY2UgPSBtdWx0ICogc3RkZGV2O1xuICAgICAgICB5ID0gbXVsdCAqIHZhbHVlO1xuICAgICAgICAvLyBwcmVzZXJ2ZSBvcmlnaW5hbCB2YWx1ZXMgaW4gZXh0cmFzIGZvciBmdXJ0aGVyIGZpbHRlcmluZ1xuICAgICAgICBzZXJpZXMucHVzaChbIHgsIHksIFsgeSAtIHZhcmlhbmNlLCB5ICsgdmFyaWFuY2UsIG51bSwgZGVuIF0gXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXJpZXMucHVzaChbIHgsIG51bSwgWyBudW0sIG51bSwgbnVtLCBkZW4gXSBdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2VyaWVzLnB1c2goWyB4LCBudWxsLCBbIG51bGwsIG51bGwsIG51bGwsIG51bGwgXSBdKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNlcmllcztcbn07XG5cbi8qKiBAaW5oZXJpdERvYyAqL1xuRnJhY3Rpb25zQmFyc0hhbmRsZXIucHJvdG90eXBlLnJvbGxpbmdBdmVyYWdlID1cbiAgICBmdW5jdGlvbihvcmlnaW5hbERhdGEsIHJvbGxQZXJpb2QsIG9wdGlvbnMsIGkpIHtcbiAgcm9sbFBlcmlvZCA9IE1hdGgubWluKHJvbGxQZXJpb2QsIG9yaWdpbmFsRGF0YS5sZW5ndGgpO1xuICB2YXIgcm9sbGluZ0RhdGEgPSBbXTtcbiAgY29uc3Qgc2VyaWVzTGFiZWwgPSBvcHRpb25zLmdldChcImxhYmVsc1wiKVtpXTtcbiAgY29uc3Qgc2lnbWEgPSBvcHRpb25zLmdldEZvclNlcmllcyhcInNpZ21hXCIsIHNlcmllc0xhYmVsKTtcbiAgY29uc3Qgd2lsc29uSW50ZXJ2YWwgPSBvcHRpb25zLmdldEZvclNlcmllcyhcIndpbHNvbkludGVydmFsXCIsIHNlcmllc0xhYmVsKTtcblxuICB2YXIgbG93LCBoaWdoLCBpLCBzdGRkZXY7XG4gIHZhciBudW0gPSAwO1xuICB2YXIgZGVuID0gMDsgLy8gbnVtZXJhdG9yL2Rlbm9taW5hdG9yXG4gIHZhciBtdWx0ID0gMTAwLjA7XG4gIGZvciAoaSA9IDA7IGkgPCBvcmlnaW5hbERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICBudW0gKz0gb3JpZ2luYWxEYXRhW2ldWzJdWzJdO1xuICAgIGRlbiArPSBvcmlnaW5hbERhdGFbaV1bMl1bM107XG4gICAgaWYgKGkgLSByb2xsUGVyaW9kID49IDApIHtcbiAgICAgIG51bSAtPSBvcmlnaW5hbERhdGFbaSAtIHJvbGxQZXJpb2RdWzJdWzJdO1xuICAgICAgZGVuIC09IG9yaWdpbmFsRGF0YVtpIC0gcm9sbFBlcmlvZF1bMl1bM107XG4gICAgfVxuXG4gICAgdmFyIGRhdGUgPSBvcmlnaW5hbERhdGFbaV1bMF07XG4gICAgdmFyIHZhbHVlID0gZGVuID8gbnVtIC8gZGVuIDogMC4wO1xuICAgIGlmICh3aWxzb25JbnRlcnZhbCkge1xuICAgICAgLy8gRm9yIG1vcmUgZGV0YWlscyBvbiB0aGlzIGNvbmZpZGVuY2UgaW50ZXJ2YWwsIHNlZTpcbiAgICAgIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Jpbm9taWFsX3Byb3BvcnRpb25fY29uZmlkZW5jZV9pbnRlcnZhbFxuICAgICAgaWYgKGRlbikge1xuICAgICAgICB2YXIgcCA9IHZhbHVlIDwgMCA/IDAgOiB2YWx1ZSwgbiA9IGRlbjtcbiAgICAgICAgdmFyIHBtID0gc2lnbWEgKiBNYXRoLnNxcnQocCAqICgxIC0gcCkgLyBuICsgc2lnbWEgKiBzaWdtYSAvICg0ICogbiAqIG4pKTtcbiAgICAgICAgdmFyIGRlbm9tID0gMSArIHNpZ21hICogc2lnbWEgLyBkZW47XG4gICAgICAgIGxvdyA9IChwICsgc2lnbWEgKiBzaWdtYSAvICgyICogZGVuKSAtIHBtKSAvIGRlbm9tO1xuICAgICAgICBoaWdoID0gKHAgKyBzaWdtYSAqIHNpZ21hIC8gKDIgKiBkZW4pICsgcG0pIC8gZGVub207XG4gICAgICAgIHJvbGxpbmdEYXRhW2ldID0gWyBkYXRlLCBwICogbXVsdCxcbiAgICAgICAgICAgIFsgbG93ICogbXVsdCwgaGlnaCAqIG11bHQgXSBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcm9sbGluZ0RhdGFbaV0gPSBbIGRhdGUsIDAsIFsgMCwgMCBdIF07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ZGRldiA9IGRlbiA/IHNpZ21hICogTWF0aC5zcXJ0KHZhbHVlICogKDEgLSB2YWx1ZSkgLyBkZW4pIDogMS4wO1xuICAgICAgcm9sbGluZ0RhdGFbaV0gPSBbIGRhdGUsIG11bHQgKiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICBbIG11bHQgKiAodmFsdWUgLSBzdGRkZXYpLCBtdWx0ICogKHZhbHVlICsgc3RkZGV2KSBdIF07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJvbGxpbmdEYXRhO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRnJhY3Rpb25zQmFyc0hhbmRsZXI7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFlBQVk7O0FBQUM7RUFBQTtBQUFBO0FBQUE7QUFFYjtBQUFpQztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUlBLG9CQUFvQixHQUFHLFNBQXZCQSxvQkFBb0IsR0FBYyxDQUN0QyxDQUFDO0FBRURBLG9CQUFvQixDQUFDQyxTQUFTLEdBQUcsSUFBSUMsZ0JBQVcsRUFBRTs7QUFFbEQ7QUFDQUYsb0JBQW9CLENBQUNDLFNBQVMsQ0FBQ0UsYUFBYSxHQUFHLFVBQVNDLE9BQU8sRUFBRUMsQ0FBQyxFQUFFQyxPQUFPLEVBQUU7RUFDM0U7RUFDQSxJQUFJQyxNQUFNLEdBQUcsRUFBRTtFQUNmLElBQUlDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxLQUFLLEVBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxLQUFLLEVBQUVDLE1BQU0sRUFBRUMsUUFBUTtFQUNsRCxJQUFJQyxJQUFJLEdBQUcsS0FBSztFQUNoQixJQUFNQyxXQUFXLEdBQUdYLE9BQU8sQ0FBQ1ksR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDYixDQUFDLENBQUM7RUFDNUMsSUFBTWMsUUFBUSxHQUFHYixPQUFPLENBQUNjLFlBQVksQ0FBQyxVQUFVLEVBQUVILFdBQVcsQ0FBQztFQUM5RCxJQUFNSSxLQUFLLEdBQUdmLE9BQU8sQ0FBQ2MsWUFBWSxDQUFDLE9BQU8sRUFBRUgsV0FBVyxDQUFDO0VBQ3hELEtBQU0sSUFBSUssQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHbEIsT0FBTyxDQUFDbUIsTUFBTSxFQUFFRCxDQUFDLEVBQUUsRUFBRTtJQUN4Q2QsQ0FBQyxHQUFHSixPQUFPLENBQUNrQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakJaLEtBQUssR0FBR04sT0FBTyxDQUFDa0IsQ0FBQyxDQUFDLENBQUNqQixDQUFDLENBQUM7SUFDckIsSUFBSWMsUUFBUSxJQUFJVCxLQUFLLEtBQUssSUFBSSxFQUFFO01BQzlCO01BQ0E7TUFDQSxJQUFJQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJQSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ2xDQSxLQUFLLEdBQUcsSUFBSTtNQUNkO0lBQ0Y7SUFDQTtJQUNBLElBQUlBLEtBQUssS0FBSyxJQUFJLEVBQUU7TUFDbEJDLEdBQUcsR0FBR0QsS0FBSyxDQUFDLENBQUMsQ0FBQztNQUNkRSxHQUFHLEdBQUdGLEtBQUssQ0FBQyxDQUFDLENBQUM7TUFDZCxJQUFJQyxHQUFHLEtBQUssSUFBSSxJQUFJLENBQUNhLEtBQUssQ0FBQ2IsR0FBRyxDQUFDLEVBQUU7UUFDL0JFLEtBQUssR0FBR0QsR0FBRyxHQUFHRCxHQUFHLEdBQUdDLEdBQUcsR0FBRyxHQUFHO1FBQzdCRSxNQUFNLEdBQUdGLEdBQUcsR0FBR1MsS0FBSyxHQUFHSSxJQUFJLENBQUNDLElBQUksQ0FBQ2IsS0FBSyxJQUFJLENBQUMsR0FBR0EsS0FBSyxDQUFDLEdBQUdELEdBQUcsQ0FBQyxHQUFHLEdBQUc7UUFDakVHLFFBQVEsR0FBR0MsSUFBSSxHQUFHRixNQUFNO1FBQ3hCTCxDQUFDLEdBQUdPLElBQUksR0FBR0gsS0FBSztRQUNoQjtRQUNBTixNQUFNLENBQUNvQixJQUFJLENBQUMsQ0FBRW5CLENBQUMsRUFBRUMsQ0FBQyxFQUFFLENBQUVBLENBQUMsR0FBR00sUUFBUSxFQUFFTixDQUFDLEdBQUdNLFFBQVEsRUFBRUosR0FBRyxFQUFFQyxHQUFHLENBQUUsQ0FBRSxDQUFDO01BQ2pFLENBQUMsTUFBTTtRQUNMTCxNQUFNLENBQUNvQixJQUFJLENBQUMsQ0FBRW5CLENBQUMsRUFBRUcsR0FBRyxFQUFFLENBQUVBLEdBQUcsRUFBRUEsR0FBRyxFQUFFQSxHQUFHLEVBQUVDLEdBQUcsQ0FBRSxDQUFFLENBQUM7TUFDakQ7SUFDRixDQUFDLE1BQU07TUFDTEwsTUFBTSxDQUFDb0IsSUFBSSxDQUFDLENBQUVuQixDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFFLENBQUUsQ0FBQztJQUN0RDtFQUNGO0VBQ0EsT0FBT0QsTUFBTTtBQUNmLENBQUM7O0FBRUQ7QUFDQVAsb0JBQW9CLENBQUNDLFNBQVMsQ0FBQzJCLGNBQWMsR0FDekMsVUFBU0MsWUFBWSxFQUFFQyxVQUFVLEVBQUV4QixPQUFPLEVBQUVELENBQUMsRUFBRTtFQUNqRHlCLFVBQVUsR0FBR0wsSUFBSSxDQUFDTSxHQUFHLENBQUNELFVBQVUsRUFBRUQsWUFBWSxDQUFDTixNQUFNLENBQUM7RUFDdEQsSUFBSVMsV0FBVyxHQUFHLEVBQUU7RUFDcEIsSUFBTWYsV0FBVyxHQUFHWCxPQUFPLENBQUNZLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQ2IsQ0FBQyxDQUFDO0VBQzVDLElBQU1nQixLQUFLLEdBQUdmLE9BQU8sQ0FBQ2MsWUFBWSxDQUFDLE9BQU8sRUFBRUgsV0FBVyxDQUFDO0VBQ3hELElBQU1nQixjQUFjLEdBQUczQixPQUFPLENBQUNjLFlBQVksQ0FBQyxnQkFBZ0IsRUFBRUgsV0FBVyxDQUFDO0VBRTFFLElBQUlpQixHQUFHLEVBQUVDLElBQUksRUFBRTlCLENBQUMsRUFBRVMsTUFBTTtFQUN4QixJQUFJSCxHQUFHLEdBQUcsQ0FBQztFQUNYLElBQUlDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNiLElBQUlJLElBQUksR0FBRyxLQUFLO0VBQ2hCLEtBQUtYLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR3dCLFlBQVksQ0FBQ04sTUFBTSxFQUFFbEIsQ0FBQyxFQUFFLEVBQUU7SUFDeENNLEdBQUcsSUFBSWtCLFlBQVksQ0FBQ3hCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1Qk8sR0FBRyxJQUFJaUIsWUFBWSxDQUFDeEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzVCLElBQUlBLENBQUMsR0FBR3lCLFVBQVUsSUFBSSxDQUFDLEVBQUU7TUFDdkJuQixHQUFHLElBQUlrQixZQUFZLENBQUN4QixDQUFDLEdBQUd5QixVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDekNsQixHQUFHLElBQUlpQixZQUFZLENBQUN4QixDQUFDLEdBQUd5QixVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0M7SUFFQSxJQUFJTSxJQUFJLEdBQUdQLFlBQVksQ0FBQ3hCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3QixJQUFJUSxLQUFLLEdBQUdELEdBQUcsR0FBR0QsR0FBRyxHQUFHQyxHQUFHLEdBQUcsR0FBRztJQUNqQyxJQUFJcUIsY0FBYyxFQUFFO01BQ2xCO01BQ0E7TUFDQSxJQUFJckIsR0FBRyxFQUFFO1FBQ1AsSUFBSXlCLENBQUMsR0FBR3hCLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHQSxLQUFLO1VBQUV5QixDQUFDLEdBQUcxQixHQUFHO1FBQ3RDLElBQUkyQixFQUFFLEdBQUdsQixLQUFLLEdBQUdJLElBQUksQ0FBQ0MsSUFBSSxDQUFDVyxDQUFDLElBQUksQ0FBQyxHQUFHQSxDQUFDLENBQUMsR0FBR0MsQ0FBQyxHQUFHakIsS0FBSyxHQUFHQSxLQUFLLElBQUksQ0FBQyxHQUFHaUIsQ0FBQyxHQUFHQSxDQUFDLENBQUMsQ0FBQztRQUN6RSxJQUFJRSxLQUFLLEdBQUcsQ0FBQyxHQUFHbkIsS0FBSyxHQUFHQSxLQUFLLEdBQUdULEdBQUc7UUFDbkNzQixHQUFHLEdBQUcsQ0FBQ0csQ0FBQyxHQUFHaEIsS0FBSyxHQUFHQSxLQUFLLElBQUksQ0FBQyxHQUFHVCxHQUFHLENBQUMsR0FBRzJCLEVBQUUsSUFBSUMsS0FBSztRQUNsREwsSUFBSSxHQUFHLENBQUNFLENBQUMsR0FBR2hCLEtBQUssR0FBR0EsS0FBSyxJQUFJLENBQUMsR0FBR1QsR0FBRyxDQUFDLEdBQUcyQixFQUFFLElBQUlDLEtBQUs7UUFDbkRSLFdBQVcsQ0FBQzNCLENBQUMsQ0FBQyxHQUFHLENBQUUrQixJQUFJLEVBQUVDLENBQUMsR0FBR3JCLElBQUksRUFDN0IsQ0FBRWtCLEdBQUcsR0FBR2xCLElBQUksRUFBRW1CLElBQUksR0FBR25CLElBQUksQ0FBRSxDQUFFO01BQ25DLENBQUMsTUFBTTtRQUNMZ0IsV0FBVyxDQUFDM0IsQ0FBQyxDQUFDLEdBQUcsQ0FBRStCLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBRSxDQUFDLEVBQUUsQ0FBQyxDQUFFLENBQUU7TUFDeEM7SUFDRixDQUFDLE1BQU07TUFDTHRCLE1BQU0sR0FBR0YsR0FBRyxHQUFHUyxLQUFLLEdBQUdJLElBQUksQ0FBQ0MsSUFBSSxDQUFDYixLQUFLLElBQUksQ0FBQyxHQUFHQSxLQUFLLENBQUMsR0FBR0QsR0FBRyxDQUFDLEdBQUcsR0FBRztNQUNqRW9CLFdBQVcsQ0FBQzNCLENBQUMsQ0FBQyxHQUFHLENBQUUrQixJQUFJLEVBQUVwQixJQUFJLEdBQUdILEtBQUssRUFDbEIsQ0FBRUcsSUFBSSxJQUFJSCxLQUFLLEdBQUdDLE1BQU0sQ0FBQyxFQUFFRSxJQUFJLElBQUlILEtBQUssR0FBR0MsTUFBTSxDQUFDLENBQUUsQ0FBRTtJQUMzRTtFQUNGO0VBRUEsT0FBT2tCLFdBQVc7QUFDcEIsQ0FBQztBQUFDLGVBRWFoQyxvQkFBb0I7QUFBQTtBQUFBIn0=