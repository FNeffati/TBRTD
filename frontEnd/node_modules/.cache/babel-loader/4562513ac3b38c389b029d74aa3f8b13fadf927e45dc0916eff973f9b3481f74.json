{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"../styling/Twitter.css\";import defaultAvatar from'../assets/avatar.jpg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Twitter(_ref){let{selectedFilters,onTweetsFetched,clickedWord}=_ref;const[tweets,setTweets]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[searchTerm,setSearchTerm]=useState('');const fetchTweets=()=>{fetch('/get_tweets',{'method':'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(selectedFilters)}).then(response=>response.json()).then(data=>{setTweets(data);console.log(\"Twitter Scroller: \");console.log(data.length);onTweetsFetched(data);setCurrentPage(1);}).catch(error=>console.error(error));};useEffect(()=>{fetchTweets();},[selectedFilters]);const highlightText=(text,term)=>{const regex=new RegExp(term,'gi');return text.replace(regex,match=>\"<span class=\\\"highlight\\\">\".concat(match,\"</span>\"));};const filteredTweets=tweets.filter(tweet=>tweet.text&&tweet.text.toLowerCase().includes(searchTerm.toLowerCase()));const[tweetsPerPage]=useState(10);const indexOfLastTweet=currentPage*tweetsPerPage;const indexOfFirstTweet=indexOfLastTweet-tweetsPerPage;const currentTweets=filteredTweets.slice(indexOfFirstTweet,indexOfLastTweet);const totalPages=Math.ceil(filteredTweets.length/tweetsPerPage);const formatDate=dateObj=>{let isoDateString;if(typeof dateObj==='object'&&dateObj.hasOwnProperty('$date')){isoDateString=dateObj['$date'];}else{isoDateString=dateObj;}const date=new Date(isoDateString);if(isNaN(date.getTime())){console.error(\"Invalid Date:\",isoDateString);return\"Invalid Date\";}return date.toLocaleDateString(\"en-US\",{year:'numeric',month:'long',day:'numeric'});};useEffect(()=>{setSearchTerm(clickedWord);},[clickedWord]);return/*#__PURE__*/_jsxs(\"div\",{className:\"twitter_container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tweets_header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search_bar_container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"tweet_search_bar\",type:\"text\",placeholder:\"Filter tweets\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{className:\"clear_button\",onClick:()=>setSearchTerm(''),children:\"Clear\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"tweets_container\",children:/*#__PURE__*/_jsx(\"ul\",{children:Array.isArray(currentTweets)&&currentTweets.length>0?currentTweets.map(tweet=>/*#__PURE__*/_jsxs(\"div\",{className:\"tweet\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tweet_top\",children:[/*#__PURE__*/_jsx(\"img\",{src:tweet.image,alt:\"#\",className:\"profile_image\"}),/*#__PURE__*/_jsxs(\"a\",{className:\"username\",target:\"_blank\",href:\"http://www.x.com/\"+tweet.username,children:[\"@\",tweet.username]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"tweet_mid\",children:/*#__PURE__*/_jsx(\"p\",{className:\"tweet_text\",dangerouslySetInnerHTML:{__html:highlightText(tweet.text,searchTerm)}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tweet_bottom\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"tweet_time\",children:formatDate(tweet.time)}),/*#__PURE__*/_jsx(\"p\",{className:\"tweet_location\",children:tweet.location})]})]})):/*#__PURE__*/_jsx(\"div\",{className:\"tweet_mid\",children:/*#__PURE__*/_jsx(\"p\",{className:\"no_match\",children:\"No Tweets match your filters.\"})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(currentPage-1),disabled:currentPage===1,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",currentPage,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(currentPage+1),disabled:currentPage===totalPages,children:\"Next\"})]})]});}export default Twitter;","map":{"version":3,"names":["React","useEffect","useState","defaultAvatar","jsx","_jsx","jsxs","_jsxs","Twitter","_ref","selectedFilters","onTweetsFetched","clickedWord","tweets","setTweets","currentPage","setCurrentPage","searchTerm","setSearchTerm","fetchTweets","fetch","headers","body","JSON","stringify","then","response","json","data","console","log","length","catch","error","highlightText","text","term","regex","RegExp","replace","match","concat","filteredTweets","filter","tweet","toLowerCase","includes","tweetsPerPage","indexOfLastTweet","indexOfFirstTweet","currentTweets","slice","totalPages","Math","ceil","formatDate","dateObj","isoDateString","hasOwnProperty","date","Date","isNaN","getTime","toLocaleDateString","year","month","day","className","children","type","placeholder","value","onChange","e","target","onClick","Array","isArray","map","src","image","alt","href","username","dangerouslySetInnerHTML","__html","time","location","disabled"],"sources":["/Users/fneffati/Documents/Classes/TBRTD/frontend/src/components/Twitter.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport \"../styling/Twitter.css\"\nimport defaultAvatar from '../assets/avatar.jpg';\n\n\n\nfunction Twitter({ selectedFilters, onTweetsFetched, clickedWord}) {\n    const [tweets, setTweets] = useState([]);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [searchTerm, setSearchTerm] = useState('');\n\n\n    const fetchTweets = () => {\n        fetch('/get_tweets',\n            {\n                'method': 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(selectedFilters)\n            })\n            .then((response) => response.json())\n            .then((data) => {\n                setTweets(data);\n                console.log(\"Twitter Scroller: \")\n                console.log(data.length)\n                onTweetsFetched(data);\n                setCurrentPage(1);\n            })\n            .catch((error) => console.error(error));\n    };\n\n    useEffect(() => {\n        fetchTweets();\n    }, [selectedFilters]);\n\n    const highlightText = (text, term) => {\n        const regex = new RegExp(term, 'gi');\n        return text.replace(regex, (match) => `<span class=\"highlight\">${match}</span>`);\n    };\n\n    const filteredTweets = tweets.filter((tweet) =>\n        tweet.text && tweet.text.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    const [tweetsPerPage] = useState(10);\n\n    const indexOfLastTweet = currentPage * tweetsPerPage;\n    const indexOfFirstTweet = indexOfLastTweet - tweetsPerPage;\n    const currentTweets = filteredTweets.slice(indexOfFirstTweet, indexOfLastTweet);\n    const totalPages = Math.ceil(filteredTweets.length / tweetsPerPage);\n\n    const formatDate = (dateObj) => {\n        let isoDateString;\n        if (typeof dateObj === 'object' && dateObj.hasOwnProperty('$date')) {\n            isoDateString = dateObj['$date'];\n        } else {\n            isoDateString = dateObj;\n        }\n\n        const date = new Date(isoDateString);\n        if (isNaN(date.getTime())) {\n            console.error(\"Invalid Date:\", isoDateString);\n            return \"Invalid Date\";\n        }\n\n        return date.toLocaleDateString(\"en-US\", {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric'\n        });\n    };\n\n    useEffect(() =>{\n        setSearchTerm(clickedWord)\n    }, [clickedWord])\n\n    return(\n        <div className=\"twitter_container\">\n            <div className=\"tweets_header\">\n                <div className=\"search_bar_container\">\n                    <input\n                        className=\"tweet_search_bar\"\n                        type=\"text\"\n                        placeholder=\"Filter tweets\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                    />\n                    {searchTerm && (\n                        <button className=\"clear_button\" onClick={() => setSearchTerm('')}>\n                            Clear\n                        </button>\n                    )}\n                </div>\n            </div>\n\n\n            <div className=\"tweets_container\">\n                <ul>\n                    {Array.isArray(currentTweets) && currentTweets.length > 0 ? (\n                        currentTweets.map((tweet) => (\n                            <div className=\"tweet\">\n                                <div className=\"tweet_top\">\n                                    <img\n                                        src={tweet.image}\n                                        alt={\"#\"}\n                                        className=\"profile_image\"\n                                    />\n                                    <a className=\"username\" target=\"_blank\" href={\"http://www.x.com/\" + tweet.username}>@{tweet.username}</a>\n                                </div>\n\n                                <div className=\"tweet_mid\">\n                                    <p\n                                        className=\"tweet_text\"\n                                        dangerouslySetInnerHTML={{\n                                            __html: highlightText(tweet.text, searchTerm),\n                                        }}\n                                    ></p>\n                                </div>\n\n                                <div className=\"tweet_bottom\">\n                                    <p className=\"tweet_time\">{formatDate(tweet.time)}</p>\n                                    <p className=\"tweet_location\">{tweet.location}</p>\n                                </div>\n\n                            </div>\n                        ))\n                    ) : (\n                        <div className=\"tweet_mid\">\n                            <p className=\"no_match\">No Tweets match your filters.</p>\n                        </div>\n                    )}\n                </ul>\n            </div>\n            <div className=\"pagination\">\n                <button onClick={() => setCurrentPage(currentPage - 1)} disabled={currentPage === 1}>\n                    Previous\n                </button>\n                <span>Page {currentPage} of {totalPages}</span>\n                <button onClick={() => setCurrentPage(currentPage + 1)} disabled={currentPage === totalPages}>\n                    Next\n                </button>\n            </div>\n        </div>\n    )\n}\n\nexport default Twitter;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}