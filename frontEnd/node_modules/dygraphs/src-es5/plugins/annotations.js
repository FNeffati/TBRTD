/**
 * @license
 * Copyright 2012 Dan Vanderkam (danvdk@gmail.com)
 * MIT-licenced: https://opensource.org/licenses/MIT
 */

/*global Dygraph:false */

"use strict";

/**
Current bits of jankiness:
- Uses dygraph.layout_ to get the parsed annotations.
- Uses dygraph.plotter_.area

It would be nice if the plugin didn't require so much special support inside
the core dygraphs classes, but annotations involve quite a bit of parsing and
layout.

TODO(danvk): cache DOM elements.
*/
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var annotations = function annotations() {
  this.annotations_ = [];
};
annotations.prototype.toString = function () {
  return "Annotations Plugin";
};
annotations.prototype.activate = function (g) {
  return {
    clearChart: this.clearChart,
    didDrawChart: this.didDrawChart
  };
};
annotations.prototype.detachLabels = function () {
  for (var i = 0; i < this.annotations_.length; i++) {
    var a = this.annotations_[i];
    if (a.parentNode) a.parentNode.removeChild(a);
    this.annotations_[i] = null;
  }
  this.annotations_ = [];
};
annotations.prototype.clearChart = function (e) {
  this.detachLabels();
};
annotations.prototype.didDrawChart = function (e) {
  var g = e.dygraph;

  // Early out in the (common) case of zero annotations.
  var points = g.layout_.annotated_points;
  if (!points || points.length === 0) return;
  var containerDiv = e.canvas.parentNode;
  var bindEvt = function bindEvt(eventName, classEventName, pt) {
    return function (annotation_event) {
      var a = pt.annotation;
      if (a.hasOwnProperty(eventName)) {
        a[eventName](a, pt, g, annotation_event);
      } else if (g.getOption(classEventName)) {
        g.getOption(classEventName)(a, pt, g, annotation_event);
      }
    };
  };

  // Add the annotations one-by-one.
  var area = e.dygraph.getArea();

  // x-coord to sum of previous annotation's heights (used for stacking).
  var xToUsedHeight = {};
  for (var i = 0; i < points.length; i++) {
    var p = points[i];
    if (p.canvasx < area.x || p.canvasx > area.x + area.w || p.canvasy < area.y || p.canvasy > area.y + area.h) {
      continue;
    }
    var a = p.annotation;
    var tick_height = 6;
    if (a.hasOwnProperty("tickHeight")) {
      tick_height = a.tickHeight;
    }

    // TODO: deprecate axisLabelFontSize in favor of CSS
    var div = document.createElement("div");
    div.style['fontSize'] = g.getOption('axisLabelFontSize') + "px";
    var className = 'dygraph-annotation';
    if (!a.hasOwnProperty('icon')) {
      // camelCase class names are deprecated.
      className += ' dygraphDefaultAnnotation dygraph-default-annotation';
    }
    if (a.hasOwnProperty('cssClass')) {
      className += " " + a.cssClass;
    }
    div.className = className;
    var width = a.hasOwnProperty('width') ? a.width : 16;
    var height = a.hasOwnProperty('height') ? a.height : 16;
    if (a.hasOwnProperty('icon')) {
      var img = document.createElement("img");
      img.src = a.icon;
      img.width = width;
      img.height = height;
      div.appendChild(img);
    } else if (p.annotation.hasOwnProperty('shortText')) {
      div.appendChild(document.createTextNode(p.annotation.shortText));
    }
    var left = p.canvasx - width / 2;
    div.style.left = left + "px";
    var divTop = 0;
    if (a.attachAtBottom) {
      var y = area.y + area.h - height - tick_height;
      if (xToUsedHeight[left]) {
        y -= xToUsedHeight[left];
      } else {
        xToUsedHeight[left] = 0;
      }
      xToUsedHeight[left] += tick_height + height;
      divTop = y;
    } else {
      divTop = p.canvasy - height - tick_height;
    }
    div.style.top = divTop + "px";
    div.style.width = width + "px";
    div.style.height = height + "px";
    div.title = p.annotation.text;
    div.style.color = g.colorsMap_[p.name];
    div.style.borderColor = g.colorsMap_[p.name];
    a.div = div;
    g.addAndTrackEvent(div, 'click', bindEvt('clickHandler', 'annotationClickHandler', p, this));
    g.addAndTrackEvent(div, 'mouseover', bindEvt('mouseOverHandler', 'annotationMouseOverHandler', p, this));
    g.addAndTrackEvent(div, 'mouseout', bindEvt('mouseOutHandler', 'annotationMouseOutHandler', p, this));
    g.addAndTrackEvent(div, 'dblclick', bindEvt('dblClickHandler', 'annotationDblClickHandler', p, this));
    containerDiv.appendChild(div);
    this.annotations_.push(div);
    var ctx = e.drawingContext;
    ctx.save();
    ctx.strokeStyle = a.hasOwnProperty('tickColor') ? a.tickColor : g.colorsMap_[p.name];
    ctx.lineWidth = a.hasOwnProperty('tickWidth') ? a.tickWidth : g.getOption('strokeWidth');
    ctx.beginPath();
    if (!a.attachAtBottom) {
      ctx.moveTo(p.canvasx, p.canvasy);
      ctx.lineTo(p.canvasx, p.canvasy - 2 - tick_height);
    } else {
      var y = divTop + height;
      ctx.moveTo(p.canvasx, y);
      ctx.lineTo(p.canvasx, y + tick_height);
    }
    ctx.closePath();
    ctx.stroke();
    ctx.restore();
  }
};
annotations.prototype.destroy = function () {
  this.detachLabels();
};
var _default = annotations;
exports["default"] = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhbm5vdGF0aW9ucyIsImFubm90YXRpb25zXyIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiYWN0aXZhdGUiLCJnIiwiY2xlYXJDaGFydCIsImRpZERyYXdDaGFydCIsImRldGFjaExhYmVscyIsImkiLCJsZW5ndGgiLCJhIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiZSIsImR5Z3JhcGgiLCJwb2ludHMiLCJsYXlvdXRfIiwiYW5ub3RhdGVkX3BvaW50cyIsImNvbnRhaW5lckRpdiIsImNhbnZhcyIsImJpbmRFdnQiLCJldmVudE5hbWUiLCJjbGFzc0V2ZW50TmFtZSIsInB0IiwiYW5ub3RhdGlvbl9ldmVudCIsImFubm90YXRpb24iLCJoYXNPd25Qcm9wZXJ0eSIsImdldE9wdGlvbiIsImFyZWEiLCJnZXRBcmVhIiwieFRvVXNlZEhlaWdodCIsInAiLCJjYW52YXN4IiwieCIsInciLCJjYW52YXN5IiwieSIsImgiLCJ0aWNrX2hlaWdodCIsInRpY2tIZWlnaHQiLCJkaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsImNsYXNzTmFtZSIsImNzc0NsYXNzIiwid2lkdGgiLCJoZWlnaHQiLCJpbWciLCJzcmMiLCJpY29uIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsInNob3J0VGV4dCIsImxlZnQiLCJkaXZUb3AiLCJhdHRhY2hBdEJvdHRvbSIsInRvcCIsInRpdGxlIiwidGV4dCIsImNvbG9yIiwiY29sb3JzTWFwXyIsIm5hbWUiLCJib3JkZXJDb2xvciIsImFkZEFuZFRyYWNrRXZlbnQiLCJwdXNoIiwiY3R4IiwiZHJhd2luZ0NvbnRleHQiLCJzYXZlIiwic3Ryb2tlU3R5bGUiLCJ0aWNrQ29sb3IiLCJsaW5lV2lkdGgiLCJ0aWNrV2lkdGgiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbG9zZVBhdGgiLCJzdHJva2UiLCJyZXN0b3JlIiwiZGVzdHJveSJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wbHVnaW5zL2Fubm90YXRpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDEyIERhbiBWYW5kZXJrYW0gKGRhbnZka0BnbWFpbC5jb20pXG4gKiBNSVQtbGljZW5jZWQ6IGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cblxuLypnbG9iYWwgRHlncmFwaDpmYWxzZSAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuLyoqXG5DdXJyZW50IGJpdHMgb2YgamFua2luZXNzOlxuLSBVc2VzIGR5Z3JhcGgubGF5b3V0XyB0byBnZXQgdGhlIHBhcnNlZCBhbm5vdGF0aW9ucy5cbi0gVXNlcyBkeWdyYXBoLnBsb3R0ZXJfLmFyZWFcblxuSXQgd291bGQgYmUgbmljZSBpZiB0aGUgcGx1Z2luIGRpZG4ndCByZXF1aXJlIHNvIG11Y2ggc3BlY2lhbCBzdXBwb3J0IGluc2lkZVxudGhlIGNvcmUgZHlncmFwaHMgY2xhc3NlcywgYnV0IGFubm90YXRpb25zIGludm9sdmUgcXVpdGUgYSBiaXQgb2YgcGFyc2luZyBhbmRcbmxheW91dC5cblxuVE9ETyhkYW52ayk6IGNhY2hlIERPTSBlbGVtZW50cy5cbiovXG5cbnZhciBhbm5vdGF0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmFubm90YXRpb25zXyA9IFtdO1xufTtcblxuYW5ub3RhdGlvbnMucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBcIkFubm90YXRpb25zIFBsdWdpblwiO1xufTtcblxuYW5ub3RhdGlvbnMucHJvdG90eXBlLmFjdGl2YXRlID0gZnVuY3Rpb24oZykge1xuICByZXR1cm4ge1xuICAgIGNsZWFyQ2hhcnQ6IHRoaXMuY2xlYXJDaGFydCxcbiAgICBkaWREcmF3Q2hhcnQ6IHRoaXMuZGlkRHJhd0NoYXJ0XG4gIH07XG59O1xuXG5hbm5vdGF0aW9ucy5wcm90b3R5cGUuZGV0YWNoTGFiZWxzID0gZnVuY3Rpb24oKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hbm5vdGF0aW9uc18ubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgYSA9IHRoaXMuYW5ub3RhdGlvbnNfW2ldO1xuICAgIGlmIChhLnBhcmVudE5vZGUpIGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKTtcbiAgICB0aGlzLmFubm90YXRpb25zX1tpXSA9IG51bGw7XG4gIH1cbiAgdGhpcy5hbm5vdGF0aW9uc18gPSBbXTtcbn07XG5cbmFubm90YXRpb25zLnByb3RvdHlwZS5jbGVhckNoYXJ0ID0gZnVuY3Rpb24oZSkge1xuICB0aGlzLmRldGFjaExhYmVscygpO1xufTtcblxuYW5ub3RhdGlvbnMucHJvdG90eXBlLmRpZERyYXdDaGFydCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIGcgPSBlLmR5Z3JhcGg7XG5cbiAgLy8gRWFybHkgb3V0IGluIHRoZSAoY29tbW9uKSBjYXNlIG9mIHplcm8gYW5ub3RhdGlvbnMuXG4gIHZhciBwb2ludHMgPSBnLmxheW91dF8uYW5ub3RhdGVkX3BvaW50cztcbiAgaWYgKCFwb2ludHMgfHwgcG9pbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gIHZhciBjb250YWluZXJEaXYgPSBlLmNhbnZhcy5wYXJlbnROb2RlO1xuXG4gIHZhciBiaW5kRXZ0ID0gZnVuY3Rpb24oZXZlbnROYW1lLCBjbGFzc0V2ZW50TmFtZSwgcHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYW5ub3RhdGlvbl9ldmVudCkge1xuICAgICAgdmFyIGEgPSBwdC5hbm5vdGF0aW9uO1xuICAgICAgaWYgKGEuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSkge1xuICAgICAgICBhW2V2ZW50TmFtZV0oYSwgcHQsIGcsIGFubm90YXRpb25fZXZlbnQpO1xuICAgICAgfSBlbHNlIGlmIChnLmdldE9wdGlvbihjbGFzc0V2ZW50TmFtZSkpIHtcbiAgICAgICAgZy5nZXRPcHRpb24oY2xhc3NFdmVudE5hbWUpKGEsIHB0LCBnLCBhbm5vdGF0aW9uX2V2ZW50ICk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBBZGQgdGhlIGFubm90YXRpb25zIG9uZS1ieS1vbmUuXG4gIHZhciBhcmVhID0gZS5keWdyYXBoLmdldEFyZWEoKTtcblxuICAvLyB4LWNvb3JkIHRvIHN1bSBvZiBwcmV2aW91cyBhbm5vdGF0aW9uJ3MgaGVpZ2h0cyAodXNlZCBmb3Igc3RhY2tpbmcpLlxuICB2YXIgeFRvVXNlZEhlaWdodCA9IHt9O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHAgPSBwb2ludHNbaV07XG4gICAgaWYgKHAuY2FudmFzeCA8IGFyZWEueCB8fCBwLmNhbnZhc3ggPiBhcmVhLnggKyBhcmVhLncgfHxcbiAgICAgICAgcC5jYW52YXN5IDwgYXJlYS55IHx8IHAuY2FudmFzeSA+IGFyZWEueSArIGFyZWEuaCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIGEgPSBwLmFubm90YXRpb247XG4gICAgdmFyIHRpY2tfaGVpZ2h0ID0gNjtcbiAgICBpZiAoYS5oYXNPd25Qcm9wZXJ0eShcInRpY2tIZWlnaHRcIikpIHtcbiAgICAgIHRpY2tfaGVpZ2h0ID0gYS50aWNrSGVpZ2h0O1xuICAgIH1cblxuICAgIC8vIFRPRE86IGRlcHJlY2F0ZSBheGlzTGFiZWxGb250U2l6ZSBpbiBmYXZvciBvZiBDU1NcbiAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkaXYuc3R5bGVbJ2ZvbnRTaXplJ10gPSBnLmdldE9wdGlvbignYXhpc0xhYmVsRm9udFNpemUnKSArIFwicHhcIjtcbiAgICB2YXIgY2xhc3NOYW1lID0gJ2R5Z3JhcGgtYW5ub3RhdGlvbic7XG4gICAgaWYgKCFhLmhhc093blByb3BlcnR5KCdpY29uJykpIHtcbiAgICAgIC8vIGNhbWVsQ2FzZSBjbGFzcyBuYW1lcyBhcmUgZGVwcmVjYXRlZC5cbiAgICAgIGNsYXNzTmFtZSArPSAnIGR5Z3JhcGhEZWZhdWx0QW5ub3RhdGlvbiBkeWdyYXBoLWRlZmF1bHQtYW5ub3RhdGlvbic7XG4gICAgfVxuICAgIGlmIChhLmhhc093blByb3BlcnR5KCdjc3NDbGFzcycpKSB7XG4gICAgICBjbGFzc05hbWUgKz0gXCIgXCIgKyBhLmNzc0NsYXNzO1xuICAgIH1cbiAgICBkaXYuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuXG4gICAgdmFyIHdpZHRoID0gYS5oYXNPd25Qcm9wZXJ0eSgnd2lkdGgnKSA/IGEud2lkdGggOiAxNjtcbiAgICB2YXIgaGVpZ2h0ID0gYS5oYXNPd25Qcm9wZXJ0eSgnaGVpZ2h0JykgPyBhLmhlaWdodCA6IDE2O1xuICAgIGlmIChhLmhhc093blByb3BlcnR5KCdpY29uJykpIHtcbiAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgaW1nLnNyYyA9IGEuaWNvbjtcbiAgICAgIGltZy53aWR0aCA9IHdpZHRoO1xuICAgICAgaW1nLmhlaWdodCA9IGhlaWdodDtcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChpbWcpO1xuICAgIH0gZWxzZSBpZiAocC5hbm5vdGF0aW9uLmhhc093blByb3BlcnR5KCdzaG9ydFRleHQnKSkge1xuICAgICAgZGl2LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHAuYW5ub3RhdGlvbi5zaG9ydFRleHQpKTtcbiAgICB9XG4gICAgdmFyIGxlZnQgPSBwLmNhbnZhc3ggLSB3aWR0aCAvIDI7XG4gICAgZGl2LnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgIHZhciBkaXZUb3AgPSAwO1xuICAgIGlmIChhLmF0dGFjaEF0Qm90dG9tKSB7XG4gICAgICB2YXIgeSA9IChhcmVhLnkgKyBhcmVhLmggLSBoZWlnaHQgLSB0aWNrX2hlaWdodCk7XG4gICAgICBpZiAoeFRvVXNlZEhlaWdodFtsZWZ0XSkge1xuICAgICAgICB5IC09IHhUb1VzZWRIZWlnaHRbbGVmdF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4VG9Vc2VkSGVpZ2h0W2xlZnRdID0gMDtcbiAgICAgIH1cbiAgICAgIHhUb1VzZWRIZWlnaHRbbGVmdF0gKz0gKHRpY2tfaGVpZ2h0ICsgaGVpZ2h0KTtcbiAgICAgIGRpdlRvcCA9IHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRpdlRvcCA9IHAuY2FudmFzeSAtIGhlaWdodCAtIHRpY2tfaGVpZ2h0O1xuICAgIH1cbiAgICBkaXYuc3R5bGUudG9wID0gZGl2VG9wICsgXCJweFwiO1xuICAgIGRpdi5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xuICAgIGRpdi5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XG4gICAgZGl2LnRpdGxlID0gcC5hbm5vdGF0aW9uLnRleHQ7XG4gICAgZGl2LnN0eWxlLmNvbG9yID0gZy5jb2xvcnNNYXBfW3AubmFtZV07XG4gICAgZGl2LnN0eWxlLmJvcmRlckNvbG9yID0gZy5jb2xvcnNNYXBfW3AubmFtZV07XG4gICAgYS5kaXYgPSBkaXY7XG5cbiAgICBnLmFkZEFuZFRyYWNrRXZlbnQoZGl2LCAnY2xpY2snLFxuICAgICAgICBiaW5kRXZ0KCdjbGlja0hhbmRsZXInLCAnYW5ub3RhdGlvbkNsaWNrSGFuZGxlcicsIHAsIHRoaXMpKTtcbiAgICBnLmFkZEFuZFRyYWNrRXZlbnQoZGl2LCAnbW91c2VvdmVyJyxcbiAgICAgICAgYmluZEV2dCgnbW91c2VPdmVySGFuZGxlcicsICdhbm5vdGF0aW9uTW91c2VPdmVySGFuZGxlcicsIHAsIHRoaXMpKTtcbiAgICBnLmFkZEFuZFRyYWNrRXZlbnQoZGl2LCAnbW91c2VvdXQnLFxuICAgICAgICBiaW5kRXZ0KCdtb3VzZU91dEhhbmRsZXInLCAnYW5ub3RhdGlvbk1vdXNlT3V0SGFuZGxlcicsIHAsIHRoaXMpKTtcbiAgICBnLmFkZEFuZFRyYWNrRXZlbnQoZGl2LCAnZGJsY2xpY2snLFxuICAgICAgICBiaW5kRXZ0KCdkYmxDbGlja0hhbmRsZXInLCAnYW5ub3RhdGlvbkRibENsaWNrSGFuZGxlcicsIHAsIHRoaXMpKTtcblxuICAgIGNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChkaXYpO1xuICAgIHRoaXMuYW5ub3RhdGlvbnNfLnB1c2goZGl2KTtcblxuICAgIHZhciBjdHggPSBlLmRyYXdpbmdDb250ZXh0O1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnN0cm9rZVN0eWxlID0gYS5oYXNPd25Qcm9wZXJ0eSgndGlja0NvbG9yJykgPyBhLnRpY2tDb2xvciA6IGcuY29sb3JzTWFwX1twLm5hbWVdO1xuICAgIGN0eC5saW5lV2lkdGggPSBhLmhhc093blByb3BlcnR5KCd0aWNrV2lkdGgnKSA/IGEudGlja1dpZHRoIDogZy5nZXRPcHRpb24oJ3N0cm9rZVdpZHRoJyk7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGlmICghYS5hdHRhY2hBdEJvdHRvbSkge1xuICAgICAgY3R4Lm1vdmVUbyhwLmNhbnZhc3gsIHAuY2FudmFzeSk7XG4gICAgICBjdHgubGluZVRvKHAuY2FudmFzeCwgcC5jYW52YXN5IC0gMiAtIHRpY2tfaGVpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHkgPSBkaXZUb3AgKyBoZWlnaHQ7XG4gICAgICBjdHgubW92ZVRvKHAuY2FudmFzeCwgeSk7XG4gICAgICBjdHgubGluZVRvKHAuY2FudmFzeCwgeSArIHRpY2tfaGVpZ2h0KTtcbiAgICB9XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIGN0eC5zdHJva2UoKTtcbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG59O1xuXG5hbm5vdGF0aW9ucy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmRldGFjaExhYmVscygpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgYW5ub3RhdGlvbnM7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsWUFBWTs7QUFFWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7RUFBQTtBQUFBO0FBQUE7QUFZQSxJQUFJQSxXQUFXLEdBQUcsU0FBZEEsV0FBVyxHQUFjO0VBQzNCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLEVBQUU7QUFDeEIsQ0FBQztBQUVERCxXQUFXLENBQUNFLFNBQVMsQ0FBQ0MsUUFBUSxHQUFHLFlBQVc7RUFDMUMsT0FBTyxvQkFBb0I7QUFDN0IsQ0FBQztBQUVESCxXQUFXLENBQUNFLFNBQVMsQ0FBQ0UsUUFBUSxHQUFHLFVBQVNDLENBQUMsRUFBRTtFQUMzQyxPQUFPO0lBQ0xDLFVBQVUsRUFBRSxJQUFJLENBQUNBLFVBQVU7SUFDM0JDLFlBQVksRUFBRSxJQUFJLENBQUNBO0VBQ3JCLENBQUM7QUFDSCxDQUFDO0FBRURQLFdBQVcsQ0FBQ0UsU0FBUyxDQUFDTSxZQUFZLEdBQUcsWUFBVztFQUM5QyxLQUFLLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNSLFlBQVksQ0FBQ1MsTUFBTSxFQUFFRCxDQUFDLEVBQUUsRUFBRTtJQUNqRCxJQUFJRSxDQUFDLEdBQUcsSUFBSSxDQUFDVixZQUFZLENBQUNRLENBQUMsQ0FBQztJQUM1QixJQUFJRSxDQUFDLENBQUNDLFVBQVUsRUFBRUQsQ0FBQyxDQUFDQyxVQUFVLENBQUNDLFdBQVcsQ0FBQ0YsQ0FBQyxDQUFDO0lBQzdDLElBQUksQ0FBQ1YsWUFBWSxDQUFDUSxDQUFDLENBQUMsR0FBRyxJQUFJO0VBQzdCO0VBQ0EsSUFBSSxDQUFDUixZQUFZLEdBQUcsRUFBRTtBQUN4QixDQUFDO0FBRURELFdBQVcsQ0FBQ0UsU0FBUyxDQUFDSSxVQUFVLEdBQUcsVUFBU1EsQ0FBQyxFQUFFO0VBQzdDLElBQUksQ0FBQ04sWUFBWSxFQUFFO0FBQ3JCLENBQUM7QUFFRFIsV0FBVyxDQUFDRSxTQUFTLENBQUNLLFlBQVksR0FBRyxVQUFTTyxDQUFDLEVBQUU7RUFDL0MsSUFBSVQsQ0FBQyxHQUFHUyxDQUFDLENBQUNDLE9BQU87O0VBRWpCO0VBQ0EsSUFBSUMsTUFBTSxHQUFHWCxDQUFDLENBQUNZLE9BQU8sQ0FBQ0MsZ0JBQWdCO0VBQ3ZDLElBQUksQ0FBQ0YsTUFBTSxJQUFJQSxNQUFNLENBQUNOLE1BQU0sS0FBSyxDQUFDLEVBQUU7RUFFcEMsSUFBSVMsWUFBWSxHQUFHTCxDQUFDLENBQUNNLE1BQU0sQ0FBQ1IsVUFBVTtFQUV0QyxJQUFJUyxPQUFPLEdBQUcsU0FBVkEsT0FBTyxDQUFZQyxTQUFTLEVBQUVDLGNBQWMsRUFBRUMsRUFBRSxFQUFFO0lBQ3BELE9BQU8sVUFBU0MsZ0JBQWdCLEVBQUU7TUFDaEMsSUFBSWQsQ0FBQyxHQUFHYSxFQUFFLENBQUNFLFVBQVU7TUFDckIsSUFBSWYsQ0FBQyxDQUFDZ0IsY0FBYyxDQUFDTCxTQUFTLENBQUMsRUFBRTtRQUMvQlgsQ0FBQyxDQUFDVyxTQUFTLENBQUMsQ0FBQ1gsQ0FBQyxFQUFFYSxFQUFFLEVBQUVuQixDQUFDLEVBQUVvQixnQkFBZ0IsQ0FBQztNQUMxQyxDQUFDLE1BQU0sSUFBSXBCLENBQUMsQ0FBQ3VCLFNBQVMsQ0FBQ0wsY0FBYyxDQUFDLEVBQUU7UUFDdENsQixDQUFDLENBQUN1QixTQUFTLENBQUNMLGNBQWMsQ0FBQyxDQUFDWixDQUFDLEVBQUVhLEVBQUUsRUFBRW5CLENBQUMsRUFBRW9CLGdCQUFnQixDQUFFO01BQzFEO0lBQ0YsQ0FBQztFQUNILENBQUM7O0VBRUQ7RUFDQSxJQUFJSSxJQUFJLEdBQUdmLENBQUMsQ0FBQ0MsT0FBTyxDQUFDZSxPQUFPLEVBQUU7O0VBRTlCO0VBQ0EsSUFBSUMsYUFBYSxHQUFHLENBQUMsQ0FBQztFQUV0QixLQUFLLElBQUl0QixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdPLE1BQU0sQ0FBQ04sTUFBTSxFQUFFRCxDQUFDLEVBQUUsRUFBRTtJQUN0QyxJQUFJdUIsQ0FBQyxHQUFHaEIsTUFBTSxDQUFDUCxDQUFDLENBQUM7SUFDakIsSUFBSXVCLENBQUMsQ0FBQ0MsT0FBTyxHQUFHSixJQUFJLENBQUNLLENBQUMsSUFBSUYsQ0FBQyxDQUFDQyxPQUFPLEdBQUdKLElBQUksQ0FBQ0ssQ0FBQyxHQUFHTCxJQUFJLENBQUNNLENBQUMsSUFDakRILENBQUMsQ0FBQ0ksT0FBTyxHQUFHUCxJQUFJLENBQUNRLENBQUMsSUFBSUwsQ0FBQyxDQUFDSSxPQUFPLEdBQUdQLElBQUksQ0FBQ1EsQ0FBQyxHQUFHUixJQUFJLENBQUNTLENBQUMsRUFBRTtNQUNyRDtJQUNGO0lBRUEsSUFBSTNCLENBQUMsR0FBR3FCLENBQUMsQ0FBQ04sVUFBVTtJQUNwQixJQUFJYSxXQUFXLEdBQUcsQ0FBQztJQUNuQixJQUFJNUIsQ0FBQyxDQUFDZ0IsY0FBYyxDQUFDLFlBQVksQ0FBQyxFQUFFO01BQ2xDWSxXQUFXLEdBQUc1QixDQUFDLENBQUM2QixVQUFVO0lBQzVCOztJQUVBO0lBQ0EsSUFBSUMsR0FBRyxHQUFHQyxRQUFRLENBQUNDLGFBQWEsQ0FBQyxLQUFLLENBQUM7SUFDdkNGLEdBQUcsQ0FBQ0csS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHdkMsQ0FBQyxDQUFDdUIsU0FBUyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsSUFBSTtJQUMvRCxJQUFJaUIsU0FBUyxHQUFHLG9CQUFvQjtJQUNwQyxJQUFJLENBQUNsQyxDQUFDLENBQUNnQixjQUFjLENBQUMsTUFBTSxDQUFDLEVBQUU7TUFDN0I7TUFDQWtCLFNBQVMsSUFBSSxzREFBc0Q7SUFDckU7SUFDQSxJQUFJbEMsQ0FBQyxDQUFDZ0IsY0FBYyxDQUFDLFVBQVUsQ0FBQyxFQUFFO01BQ2hDa0IsU0FBUyxJQUFJLEdBQUcsR0FBR2xDLENBQUMsQ0FBQ21DLFFBQVE7SUFDL0I7SUFDQUwsR0FBRyxDQUFDSSxTQUFTLEdBQUdBLFNBQVM7SUFFekIsSUFBSUUsS0FBSyxHQUFHcEMsQ0FBQyxDQUFDZ0IsY0FBYyxDQUFDLE9BQU8sQ0FBQyxHQUFHaEIsQ0FBQyxDQUFDb0MsS0FBSyxHQUFHLEVBQUU7SUFDcEQsSUFBSUMsTUFBTSxHQUFHckMsQ0FBQyxDQUFDZ0IsY0FBYyxDQUFDLFFBQVEsQ0FBQyxHQUFHaEIsQ0FBQyxDQUFDcUMsTUFBTSxHQUFHLEVBQUU7SUFDdkQsSUFBSXJDLENBQUMsQ0FBQ2dCLGNBQWMsQ0FBQyxNQUFNLENBQUMsRUFBRTtNQUM1QixJQUFJc0IsR0FBRyxHQUFHUCxRQUFRLENBQUNDLGFBQWEsQ0FBQyxLQUFLLENBQUM7TUFDdkNNLEdBQUcsQ0FBQ0MsR0FBRyxHQUFHdkMsQ0FBQyxDQUFDd0MsSUFBSTtNQUNoQkYsR0FBRyxDQUFDRixLQUFLLEdBQUdBLEtBQUs7TUFDakJFLEdBQUcsQ0FBQ0QsTUFBTSxHQUFHQSxNQUFNO01BQ25CUCxHQUFHLENBQUNXLFdBQVcsQ0FBQ0gsR0FBRyxDQUFDO0lBQ3RCLENBQUMsTUFBTSxJQUFJakIsQ0FBQyxDQUFDTixVQUFVLENBQUNDLGNBQWMsQ0FBQyxXQUFXLENBQUMsRUFBRTtNQUNuRGMsR0FBRyxDQUFDVyxXQUFXLENBQUNWLFFBQVEsQ0FBQ1csY0FBYyxDQUFDckIsQ0FBQyxDQUFDTixVQUFVLENBQUM0QixTQUFTLENBQUMsQ0FBQztJQUNsRTtJQUNBLElBQUlDLElBQUksR0FBR3ZCLENBQUMsQ0FBQ0MsT0FBTyxHQUFHYyxLQUFLLEdBQUcsQ0FBQztJQUNoQ04sR0FBRyxDQUFDRyxLQUFLLENBQUNXLElBQUksR0FBR0EsSUFBSSxHQUFHLElBQUk7SUFDNUIsSUFBSUMsTUFBTSxHQUFHLENBQUM7SUFDZCxJQUFJN0MsQ0FBQyxDQUFDOEMsY0FBYyxFQUFFO01BQ3BCLElBQUlwQixDQUFDLEdBQUlSLElBQUksQ0FBQ1EsQ0FBQyxHQUFHUixJQUFJLENBQUNTLENBQUMsR0FBR1UsTUFBTSxHQUFHVCxXQUFZO01BQ2hELElBQUlSLGFBQWEsQ0FBQ3dCLElBQUksQ0FBQyxFQUFFO1FBQ3ZCbEIsQ0FBQyxJQUFJTixhQUFhLENBQUN3QixJQUFJLENBQUM7TUFDMUIsQ0FBQyxNQUFNO1FBQ0x4QixhQUFhLENBQUN3QixJQUFJLENBQUMsR0FBRyxDQUFDO01BQ3pCO01BQ0F4QixhQUFhLENBQUN3QixJQUFJLENBQUMsSUFBS2hCLFdBQVcsR0FBR1MsTUFBTztNQUM3Q1EsTUFBTSxHQUFHbkIsQ0FBQztJQUNaLENBQUMsTUFBTTtNQUNMbUIsTUFBTSxHQUFHeEIsQ0FBQyxDQUFDSSxPQUFPLEdBQUdZLE1BQU0sR0FBR1QsV0FBVztJQUMzQztJQUNBRSxHQUFHLENBQUNHLEtBQUssQ0FBQ2MsR0FBRyxHQUFHRixNQUFNLEdBQUcsSUFBSTtJQUM3QmYsR0FBRyxDQUFDRyxLQUFLLENBQUNHLEtBQUssR0FBR0EsS0FBSyxHQUFHLElBQUk7SUFDOUJOLEdBQUcsQ0FBQ0csS0FBSyxDQUFDSSxNQUFNLEdBQUdBLE1BQU0sR0FBRyxJQUFJO0lBQ2hDUCxHQUFHLENBQUNrQixLQUFLLEdBQUczQixDQUFDLENBQUNOLFVBQVUsQ0FBQ2tDLElBQUk7SUFDN0JuQixHQUFHLENBQUNHLEtBQUssQ0FBQ2lCLEtBQUssR0FBR3hELENBQUMsQ0FBQ3lELFVBQVUsQ0FBQzlCLENBQUMsQ0FBQytCLElBQUksQ0FBQztJQUN0Q3RCLEdBQUcsQ0FBQ0csS0FBSyxDQUFDb0IsV0FBVyxHQUFHM0QsQ0FBQyxDQUFDeUQsVUFBVSxDQUFDOUIsQ0FBQyxDQUFDK0IsSUFBSSxDQUFDO0lBQzVDcEQsQ0FBQyxDQUFDOEIsR0FBRyxHQUFHQSxHQUFHO0lBRVhwQyxDQUFDLENBQUM0RCxnQkFBZ0IsQ0FBQ3hCLEdBQUcsRUFBRSxPQUFPLEVBQzNCcEIsT0FBTyxDQUFDLGNBQWMsRUFBRSx3QkFBd0IsRUFBRVcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQy9EM0IsQ0FBQyxDQUFDNEQsZ0JBQWdCLENBQUN4QixHQUFHLEVBQUUsV0FBVyxFQUMvQnBCLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRSw0QkFBNEIsRUFBRVcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3ZFM0IsQ0FBQyxDQUFDNEQsZ0JBQWdCLENBQUN4QixHQUFHLEVBQUUsVUFBVSxFQUM5QnBCLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSwyQkFBMkIsRUFBRVcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3JFM0IsQ0FBQyxDQUFDNEQsZ0JBQWdCLENBQUN4QixHQUFHLEVBQUUsVUFBVSxFQUM5QnBCLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSwyQkFBMkIsRUFBRVcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBRXJFYixZQUFZLENBQUNpQyxXQUFXLENBQUNYLEdBQUcsQ0FBQztJQUM3QixJQUFJLENBQUN4QyxZQUFZLENBQUNpRSxJQUFJLENBQUN6QixHQUFHLENBQUM7SUFFM0IsSUFBSTBCLEdBQUcsR0FBR3JELENBQUMsQ0FBQ3NELGNBQWM7SUFDMUJELEdBQUcsQ0FBQ0UsSUFBSSxFQUFFO0lBQ1ZGLEdBQUcsQ0FBQ0csV0FBVyxHQUFHM0QsQ0FBQyxDQUFDZ0IsY0FBYyxDQUFDLFdBQVcsQ0FBQyxHQUFHaEIsQ0FBQyxDQUFDNEQsU0FBUyxHQUFHbEUsQ0FBQyxDQUFDeUQsVUFBVSxDQUFDOUIsQ0FBQyxDQUFDK0IsSUFBSSxDQUFDO0lBQ3BGSSxHQUFHLENBQUNLLFNBQVMsR0FBRzdELENBQUMsQ0FBQ2dCLGNBQWMsQ0FBQyxXQUFXLENBQUMsR0FBR2hCLENBQUMsQ0FBQzhELFNBQVMsR0FBR3BFLENBQUMsQ0FBQ3VCLFNBQVMsQ0FBQyxhQUFhLENBQUM7SUFDeEZ1QyxHQUFHLENBQUNPLFNBQVMsRUFBRTtJQUNmLElBQUksQ0FBQy9ELENBQUMsQ0FBQzhDLGNBQWMsRUFBRTtNQUNyQlUsR0FBRyxDQUFDUSxNQUFNLENBQUMzQyxDQUFDLENBQUNDLE9BQU8sRUFBRUQsQ0FBQyxDQUFDSSxPQUFPLENBQUM7TUFDaEMrQixHQUFHLENBQUNTLE1BQU0sQ0FBQzVDLENBQUMsQ0FBQ0MsT0FBTyxFQUFFRCxDQUFDLENBQUNJLE9BQU8sR0FBRyxDQUFDLEdBQUdHLFdBQVcsQ0FBQztJQUNwRCxDQUFDLE1BQU07TUFDTCxJQUFJRixDQUFDLEdBQUdtQixNQUFNLEdBQUdSLE1BQU07TUFDdkJtQixHQUFHLENBQUNRLE1BQU0sQ0FBQzNDLENBQUMsQ0FBQ0MsT0FBTyxFQUFFSSxDQUFDLENBQUM7TUFDeEI4QixHQUFHLENBQUNTLE1BQU0sQ0FBQzVDLENBQUMsQ0FBQ0MsT0FBTyxFQUFFSSxDQUFDLEdBQUdFLFdBQVcsQ0FBQztJQUN4QztJQUNBNEIsR0FBRyxDQUFDVSxTQUFTLEVBQUU7SUFDZlYsR0FBRyxDQUFDVyxNQUFNLEVBQUU7SUFDWlgsR0FBRyxDQUFDWSxPQUFPLEVBQUU7RUFDZjtBQUNGLENBQUM7QUFFRC9FLFdBQVcsQ0FBQ0UsU0FBUyxDQUFDOEUsT0FBTyxHQUFHLFlBQVc7RUFDekMsSUFBSSxDQUFDeEUsWUFBWSxFQUFFO0FBQ3JCLENBQUM7QUFBQyxlQUVhUixXQUFXO0FBQUE7QUFBQSJ9