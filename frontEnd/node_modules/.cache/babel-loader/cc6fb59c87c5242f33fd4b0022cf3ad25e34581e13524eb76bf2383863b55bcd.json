{"ast":null,"code":"import React,{useEffect,useState,useMemo,useCallback}from\"react\";import ReactWordcloud from\"react-wordcloud\";import debounce from\"lodash/debounce\";import'tippy.js/dist/tippy.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const WordCloud=_ref=>{let{cloud_type,tweets,onWordCloudClick}=_ref;const[words,setWords]=useState([]);const[loading,setLoading]=useState(false);const fetchTerms=useCallback(debounce(()=>{setLoading(true);fetch(\"/get_terms\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify([cloud_type,tweets])}).then(response=>response.json()).then(data=>{setWords(data.value1);console.log(data.value1);setLoading(false);}).catch(error=>{console.error(error);setLoading(false);});},500),[cloud_type,tweets]);useEffect(()=>{if(tweets.length>0){fetchTerms();}if(tweets.length===0){setWords([{text:\"NO TWEETS AVAILABLE\",value:20}]);}},[fetchTerms,tweets]);useEffect(()=>{if(words.length===0){setWords([{text:\"NO HASHTAGS AVAILABLE\",value:20}]);}},[words]);const options=useMemo(()=>({rotations:1,rotationAngles:[0],fontSizes:[15,60],colors:[\"#1f77b4\",\"#ff7f0e\",\"#2ca02c\",\"#d62728\",\"#9467bd\",\"#8c564b\"],enableTooltip:true,deterministic:true,fontFamily:\"impact\",fontStyle:\"normal\",fontWeight:\"normal\",padding:1,scale:\"sqrt\",spiral:\"archimedean\",transitionDuration:1000}),[]);const callbacks=useMemo(()=>({onWordClick:word=>onWordCloudClick('#'+word.text)}),[]);const size=useMemo(()=>[500,600],[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"word-cloud-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"word-cloud\",children:/*#__PURE__*/_jsx(ReactWordcloud,{words:words,options:options,size:size,padding:0,callbacks:callbacks})})]});};export default WordCloud;","map":{"version":3,"names":["React","useEffect","useState","useMemo","useCallback","ReactWordcloud","debounce","jsx","_jsx","jsxs","_jsxs","WordCloud","_ref","cloud_type","tweets","onWordCloudClick","words","setWords","loading","setLoading","fetchTerms","fetch","method","headers","body","JSON","stringify","then","response","json","data","value1","console","log","catch","error","length","text","value","options","rotations","rotationAngles","fontSizes","colors","enableTooltip","deterministic","fontFamily","fontStyle","fontWeight","padding","scale","spiral","transitionDuration","callbacks","onWordClick","word","size","className","children"],"sources":["/Users/fneffati/Documents/Classes/TBENVDASH/frontEnd/tbenv/src/components/WordCloud.js"],"sourcesContent":["import React, { useEffect, useState, useMemo, useCallback } from \"react\";\nimport ReactWordcloud from \"react-wordcloud\";\nimport debounce from \"lodash/debounce\";\nimport 'tippy.js/dist/tippy.css';\n\nconst WordCloud = ({ cloud_type, tweets, onWordCloudClick}) => {\n    const [words, setWords] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    const fetchTerms = useCallback(\n        debounce(() => {\n            setLoading(true);\n            fetch(\"/get_terms\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify([cloud_type, tweets]),\n            })\n                .then((response) => response.json())\n                .then((data) => {\n                    setWords(data.value1);\n                    console.log(data.value1)\n                    setLoading(false);\n                })\n                .catch((error) => {\n                    console.error(error);\n                    setLoading(false);\n                });\n        }, 500),\n        [cloud_type, tweets]\n    );\n\n    useEffect(() => {\n        if (tweets.length > 0) {\n            fetchTerms();\n        }\n\n        if (tweets.length === 0) {\n            setWords([{\n                text: \"NO TWEETS AVAILABLE\",\n                value: 20\n            }])\n        }\n    }, [fetchTerms, tweets]);\n\n    useEffect(() => {\n        if (words.length === 0) {\n            setWords([{\n                text: \"NO HASHTAGS AVAILABLE\",\n                value: 20\n            }])\n        }\n    }, [words]);\n\n    const options = useMemo(\n        () => ({\n            rotations: 1,\n            rotationAngles: [0],\n            fontSizes: [15, 60],\n            colors: [\"#1f77b4\", \"#ff7f0e\", \"#2ca02c\", \"#d62728\", \"#9467bd\", \"#8c564b\"],\n            enableTooltip: true,\n            deterministic: true,\n            fontFamily: \"impact\",\n            fontStyle: \"normal\",\n            fontWeight: \"normal\",\n            padding: 1,\n            scale: \"sqrt\",\n            spiral: \"archimedean\",\n            transitionDuration: 1000,\n        }),\n        []\n    );\n\n    const callbacks = useMemo(\n        () => ({\n            onWordClick: (word) => onWordCloudClick('#'+word.text)\n        }),\n        []\n    );\n\n    const size = useMemo(() => [500, 600], []);\n\n    return (\n        <div className=\"word-cloud-container\">\n            <div className=\"loading\">{loading && <p>Loading...</p>}</div>\n            <div className=\"word-cloud\">\n                <ReactWordcloud  words={words} options={options} size={size} padding={0} callbacks={callbacks}/>\n            </div>\n        </div>\n    );\n};\n\nexport default WordCloud;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}